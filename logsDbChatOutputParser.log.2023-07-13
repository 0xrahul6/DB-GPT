2023-07-12 13:43:15 | INFO | stdout | INFO:     127.0.0.1:50048 - "GET /chat/?id=5aa664c8-2058-11ee-8f9e-b26789cc3e57&scene=chat_dashboard HTTP/1.1" 200 OK
2023-07-12 13:43:15 | INFO | stdout | INFO:     127.0.0.1:50048 - "GET /chunks/f60284a2-6891068c9ea7ce77.js HTTP/1.1" 200 OK
2023-07-12 13:43:15 | INFO | stdout | INFO:     127.0.0.1:50048 - "GET /api/v1/chat/dialogue/list HTTP/1.1" 200 OK
2023-07-12 13:43:15 | INFO | stdout | dialogue_history_messages:5aa664c8-2058-11ee-8f9e-b26789cc3e57
2023-07-12 13:43:15 | INFO | stdout | INFO:     127.0.0.1:50049 - "GET /api/v1/chat/dialogue/messages/history?con_uid=5aa664c8-2058-11ee-8f9e-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 13:43:15 | INFO | stdout | INFO:     127.0.0.1:50080 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 13:43:15 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 13:43:15 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 13:43:15 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     raise exc
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 13:43:15 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     raise exc
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     raise e
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 13:43:15 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 13:43:15 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 13:43:15 | ERROR | stderr |     response = await func(request)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 13:43:15 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 13:43:15 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 13:43:15 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 13:43:15 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 13:43:15 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 13:43:15 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 13:43:15 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 13:43:15 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 13:43:15 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 13:43:15 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 13:43:15 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 13:43:15 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 13:43:15 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 13:43:15 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 13:43:50 | INFO | stdout | INFO:     127.0.0.1:50105 - "POST /api/v1/chat/dialogue/scenes HTTP/1.1" 200 OK
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50117 - "GET / HTTP/1.1" 304 Not Modified
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50117 - "POST /api/v1/chat/dialogue/scenes HTTP/1.1" 200 OK
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50118 - "GET /api/v1/chat/dialogue/list HTTP/1.1" 200 OK
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50118 - "GET /index.txt?_rsc=a768e99 HTTP/1.1" 304 Not Modified
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50117 - "GET /datastores/index.txt?_rsc=a768e99 HTTP/1.1" 304 Not Modified
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50117 - "GET /chat/index.txt?id=f6d86630-1f8f-11ee-8f9e-b26789cc3e57&scene=chat_dashboard&_rsc=a768e99 HTTP/1.1" 200 OK
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50122 - "GET /chat/index.txt?id=2a4c0370-1f8e-11ee-b509-b26789cc3e57&scene=chat_dashboard&_rsc=a768e99 HTTP/1.1" 200 OK
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50118 - "GET /chat/index.txt?id=bb540aba-1f8f-11ee-8f9e-b26789cc3e57&scene=chat_dashboard&_rsc=a768e99 HTTP/1.1" 200 OK
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50121 - "GET /chat/index.txt?id=6a9eeee2-1f8e-11ee-b509-b26789cc3e57&scene=chat_dashboard&_rsc=a768e99 HTTP/1.1" 200 OK
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50120 - "GET /chat/index.txt?id=356067be-1f8f-11ee-8cdd-b26789cc3e57&scene=chat_dashboard&_rsc=a768e99 HTTP/1.1" 200 OK
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50124 - "GET /chat/index.txt?id=ecb8f6ee-1f8d-11ee-b509-b26789cc3e57&scene=chat_dashboard&_rsc=a768e99 HTTP/1.1" 200 OK
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50117 - "GET /chat/index.txt?id=86a57196-1ca1-11ee-9371-b26789cc3e58&scene=chat_dashboard&_rsc=a768e99 HTTP/1.1" 304 Not Modified
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50120 - "GET /chat/index.txt?id=71d53c6c-1c9a-11ee-833a-b26789cc3e58&scene=chat_normal&_rsc=a768e99 HTTP/1.1" 304 Not Modified
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50122 - "GET /chat/index.txt?id=6f558c94-1ca9-11ee-b2bb-b26789cc3e58&scene=chat_dashboard&_rsc=a768e99 HTTP/1.1" 304 Not Modified
2023-07-12 13:43:59 | INFO | stdout | INFO:     127.0.0.1:50121 - "GET /chat/index.txt?id=64dff984-1c8b-11ee-833a-b26789cc3e58&scene=chat_with_db_qa&_rsc=a768e99 HTTP/1.1" 304 Not Modified
2023-07-12 14:36:13 | INFO | stdout | INFO:     127.0.0.1:62548 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 14:36:13 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 14:36:13 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 14:36:13 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     raise exc
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 14:36:13 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     raise exc
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     raise e
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 14:36:13 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 14:36:13 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 14:36:13 | ERROR | stderr |     response = await func(request)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 14:36:13 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 14:36:13 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 14:36:13 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 14:36:13 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 14:36:13 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 14:36:13 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 14:36:13 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 14:36:13 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 14:36:13 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 14:36:13 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 14:36:13 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 14:36:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 14:36:13 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 14:36:13 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 14:36:13 | INFO | stdout | dialogue_history_messages:f6d86630-1f8f-11ee-8f9e-b26789cc3e57
2023-07-12 14:36:13 | INFO | stdout | INFO:     127.0.0.1:62549 - "GET /api/v1/chat/dialogue/messages/history?con_uid=f6d86630-1f8f-11ee-8f9e-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:25:38 | INFO | stdout | dialogue_history_messages:bb540aba-1f8f-11ee-8f9e-b26789cc3e57
2023-07-12 15:25:38 | INFO | stdout | INFO:     127.0.0.1:62958 - "GET /api/v1/chat/dialogue/messages/history?con_uid=bb540aba-1f8f-11ee-8f9e-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:25:38 | INFO | stdout | INFO:     127.0.0.1:62959 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:38 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:38 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:38 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     raise exc
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:38 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     raise exc
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     raise e
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:38 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:38 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:38 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:38 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:38 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:38 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:38 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:38 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:38 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:38 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:38 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:38 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:38 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:38 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:38 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:38 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:38 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:39 | INFO | stdout | INFO:     127.0.0.1:62958 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:39 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:39 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:39 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     raise exc
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:39 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     raise exc
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     raise e
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:39 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:39 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:39 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:39 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:39 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:39 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:39 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:39 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:39 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:39 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:39 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:39 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:39 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:39 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:39 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:39 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:39 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:39 | INFO | stdout | dialogue_history_messages:356067be-1f8f-11ee-8cdd-b26789cc3e57
2023-07-12 15:25:39 | INFO | stdout | INFO:     127.0.0.1:62961 - "GET /api/v1/chat/dialogue/messages/history?con_uid=356067be-1f8f-11ee-8cdd-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:25:43 | INFO | stdout | dialogue_history_messages:bb540aba-1f8f-11ee-8f9e-b26789cc3e57
2023-07-12 15:25:43 | INFO | stdout | INFO:     127.0.0.1:62961 - "GET /api/v1/chat/dialogue/messages/history?con_uid=bb540aba-1f8f-11ee-8f9e-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:25:43 | INFO | stdout | INFO:     127.0.0.1:62982 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:43 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:43 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:43 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     raise exc
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:43 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     raise exc
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     raise e
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:43 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:43 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:43 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:43 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:43 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:43 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:43 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:43 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:43 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:43 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:43 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:43 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:43 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:43 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:43 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:43 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:45 | INFO | stdout | dialogue_history_messages:f6d86630-1f8f-11ee-8f9e-b26789cc3e57
2023-07-12 15:25:45 | INFO | stdout | INFO:     127.0.0.1:62961 - "GET /api/v1/chat/dialogue/messages/history?con_uid=f6d86630-1f8f-11ee-8f9e-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:25:45 | INFO | stdout | INFO:     127.0.0.1:62995 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:45 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:45 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:45 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     raise exc
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:45 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     raise exc
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     raise e
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:45 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:45 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:45 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:45 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:45 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:45 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:45 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:45 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:45 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:45 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:45 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:45 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:45 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:45 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:45 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:45 | INFO | stdout | dialogue_history_messages:bb540aba-1f8f-11ee-8f9e-b26789cc3e57
2023-07-12 15:25:45 | INFO | stdout | INFO:     127.0.0.1:62961 - "GET /api/v1/chat/dialogue/messages/history?con_uid=bb540aba-1f8f-11ee-8f9e-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:25:45 | INFO | stdout | INFO:     127.0.0.1:63002 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:45 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:45 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:45 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     raise exc
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:45 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     raise exc
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     raise e
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:45 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:45 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:45 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:45 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:45 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:45 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:45 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:45 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:45 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:45 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:45 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:45 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:45 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:45 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:45 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:45 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:45 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:46 | INFO | stdout | dialogue_history_messages:6a9eeee2-1f8e-11ee-b509-b26789cc3e57
2023-07-12 15:25:46 | INFO | stdout | INFO:     127.0.0.1:62961 - "GET /api/v1/chat/dialogue/messages/history?con_uid=6a9eeee2-1f8e-11ee-b509-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:25:46 | INFO | stdout | INFO:     127.0.0.1:63009 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:46 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:46 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:46 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     raise exc
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:46 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     raise exc
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     raise e
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:46 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:46 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:46 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:46 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:46 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:46 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:46 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:46 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:46 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:46 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:46 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:46 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:46 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:46 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:46 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:46 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:47 | INFO | stdout | INFO:     127.0.0.1:62961 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:47 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:47 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:47 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     raise exc
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:47 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     raise exc
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     raise e
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:47 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:47 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:47 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:47 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:47 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:47 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:47 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:47 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:47 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:47 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:47 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:47 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:47 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:47 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:47 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:47 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:47 | INFO | stdout | dialogue_history_messages:2a4c0370-1f8e-11ee-b509-b26789cc3e57
2023-07-12 15:25:47 | INFO | stdout | INFO:     127.0.0.1:63015 - "GET /api/v1/chat/dialogue/messages/history?con_uid=2a4c0370-1f8e-11ee-b509-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:25:50 | INFO | stdout | dialogue_history_messages:ecb8f6ee-1f8d-11ee-b509-b26789cc3e57
2023-07-12 15:25:50 | INFO | stdout | INFO:     127.0.0.1:63015 - "GET /api/v1/chat/dialogue/messages/history?con_uid=ecb8f6ee-1f8d-11ee-b509-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:25:50 | INFO | stdout | INFO:     127.0.0.1:63031 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:50 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:50 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:50 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     raise exc
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:50 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     raise exc
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     raise e
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:50 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:50 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:50 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:50 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:50 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:50 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:50 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:50 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:50 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:50 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:50 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:50 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:50 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:50 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:50 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:50 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:50 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:53 | INFO | stdout | dialogue_history_messages:6f558c94-1ca9-11ee-b2bb-b26789cc3e58
2023-07-12 15:25:53 | INFO | stdout | INFO:     127.0.0.1:63015 - "GET /api/v1/chat/dialogue/messages/history?con_uid=6f558c94-1ca9-11ee-b2bb-b26789cc3e58 HTTP/1.1" 200 OK
2023-07-12 15:25:53 | INFO | stdout | INFO:     127.0.0.1:63051 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:53 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:53 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:53 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     raise exc
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:53 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     raise exc
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     raise e
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:53 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:53 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:53 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:53 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:53 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:53 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:53 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:53 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:53 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:53 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:53 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:53 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:53 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:53 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:53 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:53 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:53 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:54 | INFO | stdout | dialogue_history_messages:86a57196-1ca1-11ee-9371-b26789cc3e58
2023-07-12 15:25:54 | INFO | stdout | INFO:     127.0.0.1:63015 - "GET /api/v1/chat/dialogue/messages/history?con_uid=86a57196-1ca1-11ee-9371-b26789cc3e58 HTTP/1.1" 200 OK
2023-07-12 15:25:54 | INFO | stdout | INFO:     127.0.0.1:63064 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:54 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:54 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:54 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     raise exc
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:54 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     raise exc
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     raise e
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:54 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:54 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:54 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:54 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:54 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:54 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:54 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:54 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:54 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:54 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:54 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:54 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:54 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:54 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:54 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:54 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:54 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:55 | INFO | stdout | dialogue_history_messages:6f558c94-1ca9-11ee-b2bb-b26789cc3e58
2023-07-12 15:25:55 | INFO | stdout | INFO:     127.0.0.1:63015 - "GET /api/v1/chat/dialogue/messages/history?con_uid=6f558c94-1ca9-11ee-b2bb-b26789cc3e58 HTTP/1.1" 200 OK
2023-07-12 15:25:55 | INFO | stdout | INFO:     127.0.0.1:63070 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:25:55 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:25:55 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:25:55 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     raise exc
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:25:55 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     raise exc
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     raise e
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:25:55 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:25:55 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:25:55 | ERROR | stderr |     response = await func(request)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:25:55 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:25:55 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:25:55 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:25:55 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:25:55 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:25:55 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:25:55 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:25:55 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:25:55 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:25:55 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:25:55 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:25:55 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:25:55 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:25:55 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:25:59 | INFO | stdout | INFO:     127.0.0.1:63015 - "POST /api/v1/chat/dialogue/delete?con_uid=6f558c94-1ca9-11ee-b2bb-b26789cc3e58 HTTP/1.1" 200 OK
2023-07-12 15:25:59 | INFO | stdout | INFO:     127.0.0.1:63015 - "GET /api/v1/chat/dialogue/list HTTP/1.1" 200 OK
2023-07-12 15:25:59 | INFO | stdout | INFO:     127.0.0.1:63015 - "GET /chat/index.txt?id=5c6515ca-1c7a-11ee-833a-b26789cc3e58&scene=chat_with_db_execute&_rsc=1b6184d HTTP/1.1" 304 Not Modified
2023-07-12 15:26:00 | INFO | stdout | dialogue_history_messages:71d53c6c-1c9a-11ee-833a-b26789cc3e58
2023-07-12 15:26:00 | INFO | stdout | INFO:     127.0.0.1:63015 - "GET /api/v1/chat/dialogue/messages/history?con_uid=71d53c6c-1c9a-11ee-833a-b26789cc3e58 HTTP/1.1" 200 OK
2023-07-12 15:26:00 | INFO | stdout | INFO:     127.0.0.1:63097 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_normal HTTP/1.1" 200 OK
2023-07-12 15:26:03 | INFO | stdout | dialogue_history_messages:f6d86630-1f8f-11ee-8f9e-b26789cc3e57
2023-07-12 15:26:03 | INFO | stdout | INFO:     127.0.0.1:63097 - "GET /api/v1/chat/dialogue/messages/history?con_uid=f6d86630-1f8f-11ee-8f9e-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:26:03 | INFO | stdout | INFO:     127.0.0.1:63015 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:26:03 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:26:03 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:26:03 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     raise exc
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:26:03 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     raise exc
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     raise e
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:26:03 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:26:03 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:26:03 | ERROR | stderr |     response = await func(request)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:26:03 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:26:03 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:26:03 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:26:03 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:26:03 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:26:03 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:26:03 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:26:03 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:26:03 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:26:03 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:26:03 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:26:03 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:26:03 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:26:03 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:26:06 | INFO | stdout | dialogue_history_messages:bb540aba-1f8f-11ee-8f9e-b26789cc3e57
2023-07-12 15:26:06 | INFO | stdout | INFO:     127.0.0.1:63097 - "GET /api/v1/chat/dialogue/messages/history?con_uid=bb540aba-1f8f-11ee-8f9e-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:26:06 | INFO | stdout | INFO:     127.0.0.1:63123 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:26:06 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:26:06 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:26:06 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     raise exc
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:26:06 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     raise exc
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     raise e
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:26:06 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:26:06 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:26:06 | ERROR | stderr |     response = await func(request)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:26:06 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:26:06 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:26:06 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:26:06 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:26:06 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:26:06 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:26:06 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:26:06 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:26:06 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:26:06 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:26:06 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:26:06 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:26:06 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:26:06 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:26:08 | INFO | stdout | dialogue_history_messages:356067be-1f8f-11ee-8cdd-b26789cc3e57
2023-07-12 15:26:08 | INFO | stdout | INFO:     127.0.0.1:63097 - "GET /api/v1/chat/dialogue/messages/history?con_uid=356067be-1f8f-11ee-8cdd-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:26:08 | INFO | stdout | INFO:     127.0.0.1:63136 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:26:08 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:26:08 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:26:08 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     raise exc
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:26:08 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     raise exc
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     raise e
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:26:08 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:26:08 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:26:08 | ERROR | stderr |     response = await func(request)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:26:08 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:26:08 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:26:08 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:26:08 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:26:08 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:26:08 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:26:08 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:26:08 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:26:08 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:26:08 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:26:08 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:26:08 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:26:08 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:26:08 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:26:09 | INFO | stdout | dialogue_history_messages:6a9eeee2-1f8e-11ee-b509-b26789cc3e57
2023-07-12 15:26:09 | INFO | stdout | INFO:     127.0.0.1:63097 - "GET /api/v1/chat/dialogue/messages/history?con_uid=6a9eeee2-1f8e-11ee-b509-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:26:09 | INFO | stdout | INFO:     127.0.0.1:63144 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:26:09 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:26:09 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:26:09 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     raise exc
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:26:09 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     raise exc
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     raise e
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:26:09 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:26:09 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:26:09 | ERROR | stderr |     response = await func(request)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:26:09 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:26:09 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:26:09 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:26:09 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:26:09 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:26:09 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:26:09 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:26:09 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:26:09 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:26:09 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:26:09 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:26:09 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:26:09 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:26:09 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:26:11 | INFO | stdout | dialogue_history_messages:2a4c0370-1f8e-11ee-b509-b26789cc3e57
2023-07-12 15:26:11 | INFO | stdout | INFO:     127.0.0.1:63097 - "GET /api/v1/chat/dialogue/messages/history?con_uid=2a4c0370-1f8e-11ee-b509-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:26:11 | INFO | stdout | INFO:     127.0.0.1:63155 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:26:11 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:26:11 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:26:11 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     raise exc
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:26:11 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     raise exc
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     raise e
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:26:11 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:26:11 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:26:11 | ERROR | stderr |     response = await func(request)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:26:11 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:26:11 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:26:11 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:26:11 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:26:11 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:26:11 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:26:11 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:26:11 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:26:11 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:26:11 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:26:11 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:26:11 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:26:11 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:26:11 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 15:26:13 | INFO | stdout | dialogue_history_messages:ecb8f6ee-1f8d-11ee-b509-b26789cc3e57
2023-07-12 15:26:13 | INFO | stdout | INFO:     127.0.0.1:63097 - "GET /api/v1/chat/dialogue/messages/history?con_uid=ecb8f6ee-1f8d-11ee-b509-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 15:26:13 | INFO | stdout | INFO:     127.0.0.1:63167 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 15:26:13 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 15:26:13 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 15:26:13 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     raise exc
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 15:26:13 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     raise exc
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     raise e
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 15:26:13 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 15:26:13 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 15:26:13 | ERROR | stderr |     response = await func(request)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 15:26:13 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 15:26:13 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 15:26:13 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 15:26:13 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 15:26:13 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 15:26:13 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 15:26:13 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 15:26:13 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 15:26:13 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 15:26:13 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 15:26:13 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 15:26:13 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 15:26:13 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 15:26:13 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 16:44:43 | INFO | stdout | dialogue_history_messages:86a57196-1ca1-11ee-9371-b26789cc3e58
2023-07-12 16:44:43 | INFO | stdout | INFO:     127.0.0.1:60040 - "GET /api/v1/chat/dialogue/messages/history?con_uid=86a57196-1ca1-11ee-9371-b26789cc3e58 HTTP/1.1" 200 OK
2023-07-12 16:44:43 | INFO | stdout | INFO:     127.0.0.1:60041 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 16:44:43 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 16:44:43 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 16:44:43 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     raise exc
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 16:44:43 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     raise exc
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     raise e
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 16:44:43 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 16:44:43 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 16:44:43 | ERROR | stderr |     response = await func(request)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 16:44:43 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 16:44:43 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 16:44:43 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 16:44:43 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 16:44:43 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 16:44:43 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 16:44:43 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 16:44:43 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 16:44:43 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 16:44:43 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 16:44:43 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 16:44:43 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 16:44:43 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 16:44:43 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 16:44:46 | INFO | stdout | dialogue_history_messages:2a4c0370-1f8e-11ee-b509-b26789cc3e57
2023-07-12 16:44:46 | INFO | stdout | INFO:     127.0.0.1:60040 - "GET /api/v1/chat/dialogue/messages/history?con_uid=2a4c0370-1f8e-11ee-b509-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 16:44:46 | INFO | stdout | INFO:     127.0.0.1:60059 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 16:44:46 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 16:44:46 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 16:44:46 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     raise exc
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 16:44:46 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     raise exc
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     raise e
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 16:44:46 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 16:44:46 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 16:44:46 | ERROR | stderr |     response = await func(request)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 16:44:46 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 16:44:46 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 16:44:46 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 16:44:46 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 16:44:46 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 16:44:46 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 16:44:46 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 16:44:46 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 16:44:46 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 16:44:46 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 16:44:46 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 16:44:46 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 16:44:46 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 16:44:46 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 16:44:47 | INFO | stdout | dialogue_history_messages:6a9eeee2-1f8e-11ee-b509-b26789cc3e57
2023-07-12 16:44:47 | INFO | stdout | INFO:     127.0.0.1:60040 - "GET /api/v1/chat/dialogue/messages/history?con_uid=6a9eeee2-1f8e-11ee-b509-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 16:44:47 | INFO | stdout | INFO:     127.0.0.1:60079 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 16:44:47 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 16:44:47 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 16:44:47 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     raise exc
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 16:44:47 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     raise exc
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     raise e
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 16:44:47 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 16:44:47 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 16:44:47 | ERROR | stderr |     response = await func(request)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 16:44:47 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 16:44:47 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 16:44:47 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 16:44:47 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 16:44:47 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 16:44:47 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 16:44:47 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 16:44:47 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 16:44:47 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 16:44:47 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 16:44:47 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 16:44:47 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 16:44:47 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 16:44:47 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 16:44:49 | INFO | stdout | dialogue_history_messages:bb540aba-1f8f-11ee-8f9e-b26789cc3e57
2023-07-12 16:44:49 | INFO | stdout | INFO:     127.0.0.1:60040 - "GET /api/v1/chat/dialogue/messages/history?con_uid=bb540aba-1f8f-11ee-8f9e-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 16:44:49 | INFO | stdout | INFO:     127.0.0.1:60096 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 16:44:49 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 16:44:49 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 16:44:49 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     raise exc
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 16:44:49 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     raise exc
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     raise e
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 16:44:49 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 16:44:49 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 16:44:49 | ERROR | stderr |     response = await func(request)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 16:44:49 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 16:44:49 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 16:44:49 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 16:44:49 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 16:44:49 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 16:44:49 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 16:44:49 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 16:44:49 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 16:44:49 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 16:44:49 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 16:44:49 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 16:44:49 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 16:44:49 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 16:44:49 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 16:44:52 | INFO | stdout | dialogue_history_messages:f6d86630-1f8f-11ee-8f9e-b26789cc3e57
2023-07-12 16:44:52 | INFO | stdout | INFO:     127.0.0.1:60040 - "GET /api/v1/chat/dialogue/messages/history?con_uid=f6d86630-1f8f-11ee-8f9e-b26789cc3e57 HTTP/1.1" 200 OK
2023-07-12 16:44:52 | INFO | stdout | INFO:     127.0.0.1:60112 - "POST /api/v1/chat/mode/params/list?chat_mode=chat_dashboard HTTP/1.1" 500 Internal Server Error
2023-07-12 16:44:52 | ERROR | stderr | ERROR:    Exception in ASGI application
2023-07-12 16:44:52 | ERROR | stderr | Traceback (most recent call last):
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 435, in run_asgi
2023-07-12 16:44:52 | ERROR | stderr |     result = await app(  # type: ignore[func-returns-value]
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 78, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     return await self.app(scope, receive, send)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/applications.py", line 282, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     await super().__call__(scope, receive, send)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/applications.py", line 122, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     await self.middleware_stack(scope, receive, send)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 184, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     raise exc
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/errors.py", line 162, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     await self.app(scope, receive, _send)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 91, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     await self.simple_response(scope, receive, send, request_headers=headers)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/cors.py", line 146, in simple_response
2023-07-12 16:44:52 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 79, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     raise exc
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 68, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     await self.app(scope, receive, sender)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 20, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     raise e
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/middleware/asyncexitstack.py", line 17, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 718, in __call__
2023-07-12 16:44:52 | ERROR | stderr |     await route.handle(scope, receive, send)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 276, in handle
2023-07-12 16:44:52 | ERROR | stderr |     await self.app(scope, receive, send)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/starlette/routing.py", line 66, in app
2023-07-12 16:44:52 | ERROR | stderr |     response = await func(request)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 241, in app
2023-07-12 16:44:52 | ERROR | stderr |     raw_response = await run_endpoint_function(
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/fastapi/routing.py", line 167, in run_endpoint_function
2023-07-12 16:44:52 | ERROR | stderr |     return await dependant.call(**values)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 153, in params_list
2023-07-12 16:44:52 | ERROR | stderr |     return Result.succ(get_db_list())
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/openapi/api_v1/api_v1.py", line 75, in get_db_list
2023-07-12 16:44:52 | ERROR | stderr |     dbs = db.get_database_list()
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py", line 344, in get_database_list
2023-07-12 16:44:52 | ERROR | stderr |     cursor = session.execute(text(" show databases;"))
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 1717, in execute
2023-07-12 16:44:52 | ERROR | stderr |     result = conn._execute_20(statement, params or {}, execution_options)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1710, in _execute_20
2023-07-12 16:44:52 | ERROR | stderr |     return meth(self, args_10style, kwargs_10style, execution_options)
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 334, in _execute_on_connection
2023-07-12 16:44:52 | ERROR | stderr |     return connection._execute_clauseelement(
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1577, in _execute_clauseelement
2023-07-12 16:44:52 | ERROR | stderr |     ret = self._execute_context(
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1803, in _execute_context
2023-07-12 16:44:52 | ERROR | stderr |     conn = self._revalidate_connection()
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 650, in _revalidate_connection
2023-07-12 16:44:52 | ERROR | stderr |     self._invalid_transaction()
2023-07-12 16:44:52 | ERROR | stderr |   File "/Users/tuyang.yhj/conda/envs/DB-GPT/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 622, in _invalid_transaction
2023-07-12 16:44:52 | ERROR | stderr |     raise exc.PendingRollbackError(
2023-07-12 16:44:52 | ERROR | stderr | sqlalchemy.exc.PendingRollbackError: Can't reconnect until invalid transaction is rolled back. (Background on this error at: https://sqlalche.me/e/14/8s2b)
2023-07-12 17:45:35 | ERROR | stderr | INFO:     Shutting down
2023-07-12 17:45:46 | INFO | webserver | args: Namespace(model_list_mode='once', host='0.0.0.0', port=5000, concurrency_count=10, share=False, light=False)
2023-07-12 17:45:46 | INFO | stdout | /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot
2023-07-12 17:45:46 | INFO | stdout |  [0m Allowlisted Plugins: ['AutoGPTTiDB', 'DbGPTSimpleChart', 'DBGPTByteBasePlugin']
2023-07-12 17:45:46 | DEBUG | LOGGER | Allowlisted Plugins: ['AutoGPTTiDB', 'DbGPTSimpleChart', 'DBGPTByteBasePlugin']
2023-07-12 17:45:46 | INFO | stdout |  [0m Denylisted Plugins: []
2023-07-12 17:45:46 | INFO | stdout | async load_native_plugins
2023-07-12 17:45:46 | DEBUG | LOGGER | Denylisted Plugins: []
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | BEGIN (implicit)
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine |  show databases;
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine |  show databases;
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00112s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00112s] {}
2023-07-12 17:45:46 | INFO | stdout |  [0m Found module 'DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py' in the zipfile at: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py
2023-07-12 17:45:46 | DEBUG | LOGGER | Found module 'DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py' in the zipfile at: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py
2023-07-12 17:45:46 | INFO | stdout |  [0m Found module 'DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py' in the zipfile at: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py
2023-07-12 17:45:46 | DEBUG | LOGGER | Found module 'DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py' in the zipfile at: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py
2023-07-12 17:45:46 | INFO | stdout |  [0m Plugin: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/plugins/DB-GPT-Plugins-plugin_dashboard-20230711100722.zip Module: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py
2023-07-12 17:45:46 | DEBUG | LOGGER | Plugin: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/plugins/DB-GPT-Plugins-plugin_dashboard-20230711100722.zip Module: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py
2023-07-12 17:45:46 | INFO | stdout |  [0m Plugin: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/plugins/DB-GPT-Plugins-plugin_dashboard-20230711100722.zip Module: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py
2023-07-12 17:45:46 | DEBUG | LOGGER | Plugin: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/plugins/DB-GPT-Plugins-plugin_dashboard-20230711100722.zip Module: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py
2023-07-12 17:45:46 | INFO | stdout |  [0m
2023-07-12 17:45:46 | INFO | stdout | Plugins found: 2
2023-07-12 17:45:46 | INFO | stdout | --------------------
2023-07-12 17:45:46 | INFO | LOGGER | 
Plugins found: 2
--------------------
2023-07-12 17:45:46 | INFO | stdout |  [0m DB-GPT-DASHBOARD-Plugin: 0.1.0 - This is an DbGPT plugin to generate data analysis charts.
2023-07-12 17:45:46 | INFO | LOGGER | DB-GPT-DASHBOARD-Plugin: 0.1.0 - This is an DbGPT plugin to generate data analysis charts.
2023-07-12 17:45:46 | INFO | stdout |  [0m DB-GPT-SQL-Execution-Plugin: 0.1.0 - This is an DbGPT plugin to connect Generic Db And Execute SQL.
2023-07-12 17:45:46 | INFO | LOGGER | DB-GPT-SQL-Execution-Plugin: 0.1.0 - This is an DbGPT plugin to connect Generic Db And Execute SQL.
2023-07-12 17:45:46 | INFO | stdout | Model Unified Deployment Mode!
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | use `dbgpt-test`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | use `dbgpt-test`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00034s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00034s] {}
2023-07-12 17:45:46 | INFO | stdout | Loading proxyllm LLM ModelServer in mps! Please Wait......
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `dbgpt-test`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `dbgpt-test`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | stdout | LLM Model Loading Success！
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE `dbgpt-test`.`test`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE `dbgpt-test`.`test`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE `dbgpt-test`.`transaction_order`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE `dbgpt-test`.`transaction_order`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE `dbgpt-test`.`uapp_event_batch_log`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE `dbgpt-test`.`uapp_event_batch_log`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE `dbgpt-test`.`user`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE `dbgpt-test`.`user`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `dbgpt-test`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `dbgpt-test`
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT user, host FROM mysql.user
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT user, host FROM mysql.user
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00030s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00030s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW GRANTS
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW GRANTS
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00024s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00024s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT @@character_set_database
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT @@character_set_database
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00018s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00018s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT @@collation_database
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT @@collation_database
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00018s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00018s] {}
2023-07-12 17:45:46 | ERROR | stderr | /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py:90: UserWarning: This method is deprecated - please use `get_usable_table_names`.
2023-07-12 17:45:46 | ERROR | stderr |   warnings.warn(
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT table_name, table_comment    FROM information_schema.tables   WHERE table_schema = 'dbgpt-test'
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT table_name, table_comment    FROM information_schema.tables   WHERE table_schema = 'dbgpt-test'
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00018s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00018s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT COLUMN_NAME, COLUMN_TYPE, COLUMN_DEFAULT, IS_NULLABLE, COLUMN_COMMENT  from information_schema.COLUMNS where table_name='transaction_order'
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT COLUMN_NAME, COLUMN_TYPE, COLUMN_DEFAULT, IS_NULLABLE, COLUMN_COMMENT  from information_schema.COLUMNS where table_name='transaction_order'
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00030s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00030s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW INDEXES FROM transaction_order
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW INDEXES FROM transaction_order
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00032s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00032s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE  transaction_order
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE  transaction_order
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00023s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00023s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT COLUMN_NAME, COLUMN_TYPE, COLUMN_DEFAULT, IS_NULLABLE, COLUMN_COMMENT  from information_schema.COLUMNS where table_name='user'
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT COLUMN_NAME, COLUMN_TYPE, COLUMN_DEFAULT, IS_NULLABLE, COLUMN_COMMENT  from information_schema.COLUMNS where table_name='user'
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00029s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00029s] {}
2023-07-12 17:45:46 | ERROR | stderr | INFO:     Started server process [60454]
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW INDEXES FROM user
2023-07-12 17:45:46 | ERROR | stderr | INFO:     Waiting for application startup.
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW INDEXES FROM user
2023-07-12 17:45:46 | ERROR | stderr | INFO:     Application startup complete.
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00071s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00071s] {}
2023-07-12 17:45:46 | ERROR | stderr | INFO:     Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE  user
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE  user
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00019s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00019s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT COLUMN_NAME, COLUMN_TYPE, COLUMN_DEFAULT, IS_NULLABLE, COLUMN_COMMENT  from information_schema.COLUMNS where table_name='uapp_event_batch_log'
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT COLUMN_NAME, COLUMN_TYPE, COLUMN_DEFAULT, IS_NULLABLE, COLUMN_COMMENT  from information_schema.COLUMNS where table_name='uapp_event_batch_log'
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00019s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00019s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW INDEXES FROM uapp_event_batch_log
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW INDEXES FROM uapp_event_batch_log
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00022s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00022s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE  uapp_event_batch_log
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE  uapp_event_batch_log
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00024s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00024s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT COLUMN_NAME, COLUMN_TYPE, COLUMN_DEFAULT, IS_NULLABLE, COLUMN_COMMENT  from information_schema.COLUMNS where table_name='test'
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SELECT COLUMN_NAME, COLUMN_TYPE, COLUMN_DEFAULT, IS_NULLABLE, COLUMN_COMMENT  from information_schema.COLUMNS where table_name='test'
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00019s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00019s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW INDEXES FROM test
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW INDEXES FROM test
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00021s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00021s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE  test
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | SHOW CREATE TABLE  test
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00021s] {}
2023-07-12 17:45:46 | INFO | sqlalchemy.engine.Engine | [generated in 0.00021s] {}
2023-07-12 17:45:48 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:48 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:48 | INFO | chromadb | Running Chroma using direct local API.
2023-07-12 17:45:48 | WARNING | chromadb | Using embedded DuckDB with persistence: data will be stored in: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/dbgpt-test_profile.vectordb
2023-07-12 17:45:49 | INFO | chromadb.db.duckdb | loaded in 2 embeddings
2023-07-12 17:45:49 | INFO | chromadb.db.duckdb | loaded in 1 collections
2023-07-12 17:45:49 | INFO | chromadb.db.duckdb | collection with name langchain already exists, returning existing collection
2023-07-12 17:45:49 | INFO | langchain.embeddings | init db profile success...
2023-07-12 17:45:49 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:49 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:49 | INFO | chromadb | Running Chroma using direct local API.
2023-07-12 17:45:49 | WARNING | chromadb | Using embedded DuckDB with persistence: data will be stored in: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/dbgpt-test_summary.vectordb
2023-07-12 17:45:49 | INFO | chromadb.db.duckdb | loaded in 0 embeddings
2023-07-12 17:45:49 | INFO | chromadb.db.duckdb | loaded in 1 collections
2023-07-12 17:45:49 | INFO | chromadb.db.duckdb | collection with name langchain already exists, returning existing collection
2023-07-12 17:45:49 | INFO | langchain.embeddings | db summary embedding success
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | use `gpt-user`
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | use `gpt-user`
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [generated in 0.00037s] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [generated in 0.00037s] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `gpt-user`
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `gpt-user`
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `gpt-user`
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `gpt-user`
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SELECT user, host FROM mysql.user
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SELECT user, host FROM mysql.user
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [cached since 2.305s ago] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [cached since 2.305s ago] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SHOW GRANTS
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SHOW GRANTS
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [cached since 2.303s ago] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [cached since 2.303s ago] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SELECT @@character_set_database
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SELECT @@character_set_database
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [cached since 2.303s ago] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [cached since 2.303s ago] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SELECT @@collation_database
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SELECT @@collation_database
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [cached since 2.304s ago] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [cached since 2.304s ago] {}
2023-07-12 17:45:49 | ERROR | stderr | /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/common/sql_database.py:90: UserWarning: This method is deprecated - please use `get_usable_table_names`.
2023-07-12 17:45:49 | ERROR | stderr |   warnings.warn(
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SELECT table_name, table_comment    FROM information_schema.tables   WHERE table_schema = 'gpt-user'
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | SELECT table_name, table_comment    FROM information_schema.tables   WHERE table_schema = 'gpt-user'
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [generated in 0.00019s] {}
2023-07-12 17:45:49 | INFO | sqlalchemy.engine.Engine | [generated in 0.00019s] {}
2023-07-12 17:45:50 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:50 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:50 | INFO | chromadb | Running Chroma using direct local API.
2023-07-12 17:45:50 | WARNING | chromadb | Using embedded DuckDB with persistence: data will be stored in: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/gpt-user_profile.vectordb
2023-07-12 17:45:51 | INFO | chromadb.db.duckdb | loaded in 4 embeddings
2023-07-12 17:45:51 | INFO | chromadb.db.duckdb | loaded in 1 collections
2023-07-12 17:45:51 | INFO | chromadb.db.duckdb | collection with name langchain already exists, returning existing collection
2023-07-12 17:45:51 | INFO | langchain.embeddings | init db profile success...
2023-07-12 17:45:51 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:51 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:51 | INFO | chromadb | Running Chroma using direct local API.
2023-07-12 17:45:51 | WARNING | chromadb | Using embedded DuckDB with persistence: data will be stored in: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/gpt-user_summary.vectordb
2023-07-12 17:45:51 | INFO | chromadb.db.duckdb | loaded in 3 embeddings
2023-07-12 17:45:51 | INFO | chromadb.db.duckdb | loaded in 1 collections
2023-07-12 17:45:51 | INFO | chromadb.db.duckdb | collection with name langchain already exists, returning existing collection
2023-07-12 17:45:51 | INFO | langchain.embeddings | db summary embedding success
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | use `test_db`
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | use `test_db`
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [generated in 0.00029s] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [generated in 0.00029s] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `test_db`
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `test_db`
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `test_db`
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SHOW FULL TABLES FROM `test_db`
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [raw sql] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SELECT user, host FROM mysql.user
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SELECT user, host FROM mysql.user
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [cached since 4.255s ago] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [cached since 4.255s ago] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SHOW GRANTS
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SHOW GRANTS
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [cached since 4.252s ago] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [cached since 4.252s ago] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SELECT @@character_set_database
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SELECT @@character_set_database
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [cached since 4.252s ago] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [cached since 4.252s ago] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SELECT @@collation_database
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SELECT @@collation_database
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [cached since 4.253s ago] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [cached since 4.253s ago] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SELECT table_name, table_comment    FROM information_schema.tables   WHERE table_schema = 'test_db'
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | SELECT table_name, table_comment    FROM information_schema.tables   WHERE table_schema = 'test_db'
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [generated in 0.00020s] {}
2023-07-12 17:45:51 | INFO | sqlalchemy.engine.Engine | [generated in 0.00020s] {}
2023-07-12 17:45:52 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:52 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:52 | INFO | chromadb | Running Chroma using direct local API.
2023-07-12 17:45:52 | WARNING | chromadb | Using embedded DuckDB with persistence: data will be stored in: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/test_db_profile.vectordb
2023-07-12 17:45:52 | INFO | chromadb.db.duckdb | loaded in 0 embeddings
2023-07-12 17:45:52 | INFO | chromadb.db.duckdb | loaded in 1 collections
2023-07-12 17:45:52 | INFO | chromadb.db.duckdb | collection with name langchain already exists, returning existing collection
2023-07-12 17:45:52 | INFO | langchain.embeddings | init db profile success...
2023-07-12 17:45:52 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:52 | INFO | chromadb.telemetry.posthog | Anonymized telemetry enabled. See https://docs.trychroma.com/telemetry for more information.
2023-07-12 17:45:52 | INFO | chromadb | Running Chroma using direct local API.
2023-07-12 17:45:52 | WARNING | chromadb | Using embedded DuckDB with persistence: data will be stored in: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/test_db_summary.vectordb
2023-07-12 17:45:52 | INFO | chromadb.db.duckdb | loaded in 0 embeddings
2023-07-12 17:45:52 | INFO | chromadb.db.duckdb | loaded in 1 collections
2023-07-12 17:45:52 | INFO | chromadb.db.duckdb | collection with name langchain already exists, returning existing collection
2023-07-12 17:45:52 | INFO | langchain.embeddings | db summary embedding success
2023-07-12 17:45:53 | INFO | stdout | /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/plugins/DB-GPT-Plugins-plugin_dashboard-20230712174553.zip
2023-07-12 17:45:53 | INFO | stdout | save file
2023-07-12 17:45:53 | INFO | stdout | /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot
2023-07-12 17:45:53 | INFO | stdout |  [0m Allowlisted Plugins: ['AutoGPTTiDB', 'DbGPTSimpleChart', 'DBGPTByteBasePlugin']
2023-07-12 17:45:53 | DEBUG | LOGGER | Allowlisted Plugins: ['AutoGPTTiDB', 'DbGPTSimpleChart', 'DBGPTByteBasePlugin']
2023-07-12 17:45:53 | INFO | stdout |  [0m Denylisted Plugins: []
2023-07-12 17:45:53 | DEBUG | LOGGER | Denylisted Plugins: []
2023-07-12 17:45:53 | INFO | stdout |  [0m Found module 'DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py' in the zipfile at: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py
2023-07-12 17:45:53 | DEBUG | LOGGER | Found module 'DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py' in the zipfile at: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py
2023-07-12 17:45:53 | INFO | stdout |  [0m Found module 'DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py' in the zipfile at: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py
2023-07-12 17:45:53 | DEBUG | LOGGER | Found module 'DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py' in the zipfile at: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py
2023-07-12 17:45:53 | INFO | stdout |  [0m Plugin: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/plugins/DB-GPT-Plugins-plugin_dashboard-20230712174553.zip Module: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py
2023-07-12 17:45:53 | DEBUG | LOGGER | Plugin: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/plugins/DB-GPT-Plugins-plugin_dashboard-20230712174553.zip Module: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/db_dashboard/__init__.py
2023-07-12 17:45:53 | INFO | stdout |  [0m Plugin: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/plugins/DB-GPT-Plugins-plugin_dashboard-20230712174553.zip Module: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py
2023-07-12 17:45:53 | DEBUG | LOGGER | Plugin: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/plugins/DB-GPT-Plugins-plugin_dashboard-20230712174553.zip Module: DB-GPT-Plugins-plugin_dashboard/src/dbgpt_plugins/generic_db/__init__.py
2023-07-12 17:45:53 | INFO | stdout |  [0m
2023-07-12 17:45:53 | INFO | stdout | Plugins found: 2
2023-07-12 17:45:53 | INFO | stdout | --------------------
2023-07-12 17:45:53 | INFO | LOGGER | 
Plugins found: 2
--------------------
2023-07-12 17:45:53 | INFO | stdout |  [0m DB-GPT-DASHBOARD-Plugin: 0.1.0 - This is an DbGPT plugin to generate data analysis charts.
2023-07-12 17:45:53 | INFO | LOGGER | DB-GPT-DASHBOARD-Plugin: 0.1.0 - This is an DbGPT plugin to generate data analysis charts.
2023-07-12 17:45:53 | INFO | stdout |  [0m DB-GPT-SQL-Execution-Plugin: 0.1.0 - This is an DbGPT plugin to connect Generic Db And Execute SQL.
2023-07-12 17:45:53 | INFO | LOGGER | DB-GPT-SQL-Execution-Plugin: 0.1.0 - This is an DbGPT plugin to connect Generic Db And Execute SQL.
2023-07-13 10:09:59 | ERROR | stderr | INFO:     Shutting down
2023-07-13 10:10:00 | ERROR | stderr | INFO:     Waiting for application shutdown.
2023-07-13 10:10:00 | ERROR | stderr | INFO:     Application shutdown complete.
2023-07-13 10:10:00 | ERROR | stderr | INFO:     Finished server process [60454]
2023-07-13 10:10:00 | INFO | chromadb.db.duckdb | Persisting DB to disk, putting it in the save folder: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/test_db_summary.vectordb
2023-07-13 10:10:00 | INFO | chromadb.db.duckdb | Persisting DB to disk, putting it in the save folder: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/test_db_profile.vectordb
2023-07-13 10:10:00 | INFO | chromadb.db.duckdb | Persisting DB to disk, putting it in the save folder: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/gpt-user_summary.vectordb
2023-07-13 10:10:00 | INFO | chromadb.db.duckdb | Persisting DB to disk, putting it in the save folder: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/gpt-user_profile.vectordb
2023-07-13 10:10:00 | INFO | chromadb.db.duckdb | Persisting DB to disk, putting it in the save folder: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/dbgpt-test_summary.vectordb
2023-07-13 10:10:00 | INFO | chromadb.db.duckdb | Persisting DB to disk, putting it in the save folder: /Users/tuyang.yhj/Code/PycharmProjects/DB-GPT/pilot/data/dbgpt-test_profile.vectordb
