(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{72431:function(){},91541:function(e,t,r){Promise.resolve().then(r.bind(r,50902))},57931:function(e,t,r){"use strict";r.d(t,{ZP:function(){return d},Cg:function(){return a}});var n=r(9268),i=r(89081),s=r(78915),l=r(86006);let[a,o]=function(){let e=l.createContext(void 0);return[function(){let t=l.useContext(e);if(void 0===t)throw Error("useCtx must be inside a Provider with a value");return t},e.Provider]}();var d=e=>{let{children:t}=e,{run:r,data:l,refresh:a}=(0,i.Z)(async()=>await (0,s.T)("/v1/chat/dialogue/list"),{manual:!0});return(0,n.jsx)(o,{value:{dialogueList:l,queryDialogueList:r,refreshDialogList:a},children:t})}},50902:function(e,t,r){"use strict";let n,i;r.r(t),r.d(t,{default:function(){return K}});var s=r(9268);r(97402),r(23517);var l=r(86006),a=r(56008),o=r(35846),d=r.n(o),c=r(20837),u=r(78635),h=r(90545),x=r(22046),f=r(53113),p=r(18818),m=r(4882),v=r(70092),j=r(64579),g=r(53047),y=r(62921),b=r(40020),Z=r(11515),w=r(84892),C=r(601),k=r(1301),B=r(98703),N=r(57931),P=r(66664),_=r(78915),D=()=>{var e;let t=(0,a.usePathname)(),r=(0,a.useSearchParams)(),n=(0,a.useRouter)(),{dialogueList:i,queryDialogueList:o,refreshDialogList:D}=(0,N.Cg)(),{mode:E,setMode:S}=(0,u.tv)(),z=(0,l.useMemo)(()=>[{label:"Knowledge Space",route:"/datastores",icon:(0,s.jsx)(b.Z,{fontSize:"small"}),active:"/datastores"===t}],[t]);return(0,l.useEffect)(()=>{(async()=>{await o()})()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("nav",{className:"flex h-12 items-center justify-between border-b px-4 dark:border-gray-800 dark:bg-gray-800/70 md:hidden",children:[(0,s.jsx)("div",{children:(0,s.jsx)(C.Z,{})}),(0,s.jsx)("span",{className:"truncate px-4",children:"New Chat"}),(0,s.jsx)("a",{href:"",className:"-mr-3 flex h-9 w-9 shrink-0 items-center justify-center",children:(0,s.jsx)(k.Z,{})})]}),(0,s.jsx)("nav",{className:"grid max-h-screen h-full max-md:hidden",children:(0,s.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"column",borderRight:"1px solid",borderColor:"divider",maxHeight:"100vh",position:"sticky",left:"0px",top:"0px",overflow:"hidden"},children:[(0,s.jsx)(h.Z,{sx:{p:2,gap:2,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:(0,s.jsx)("div",{className:"flex items-center  gap-3",children:(0,s.jsx)(x.ZP,{component:"h1",fontWeight:"xl",children:"DB-GPT"})})}),(0,s.jsx)(h.Z,{sx:{px:2},children:(0,s.jsx)(d(),{href:"/",children:(0,s.jsx)(f.Z,{variant:"outlined",color:"primary",className:"w-full",children:"+ New Chat"})})}),(0,s.jsx)(h.Z,{sx:{p:2,display:{xs:"none",sm:"initial"},maxHeight:"100%",overflow:"auto"},children:(0,s.jsx)(p.Z,{size:"sm",sx:{"--ListItem-radius":"8px"},children:(0,s.jsx)(m.Z,{nested:!0,children:(0,s.jsx)(p.Z,{size:"sm","aria-labelledby":"nav-list-browse",sx:{"& .JoyListItemButton-root":{p:"8px"},gap:"4px"},children:null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.map(e=>{let i="/chat"===t&&r.get("id")===e.conv_uid;return(0,s.jsx)(m.Z,{children:(0,s.jsx)(v.Z,{selected:i,variant:i?"soft":"plain",sx:{"&:hover .del-btn":{visibility:"visible"}},children:(0,s.jsx)(j.Z,{children:(0,s.jsxs)(d(),{href:"/chat?id=".concat(e.conv_uid,"&scene=").concat(null==e?void 0:e.chat_mode),className:"flex items-center justify-between",children:[(0,s.jsxs)(x.ZP,{fontSize:14,noWrap:!0,children:[(0,s.jsx)(B.Z,{className:"mr-2"}),(null==e?void 0:e.user_name)||(null==e?void 0:e.user_input)||"undefined"]}),(0,s.jsx)(g.ZP,{color:"neutral",variant:"plain",size:"sm",onClick:i=>{i.preventDefault(),i.stopPropagation(),c.Z.confirm({title:"Delete Chat",content:"Are you sure delete this chat?",width:"276px",centered:!0,async onOk(){await (0,_.K)("/v1/chat/dialogue/delete?con_uid=".concat(e.conv_uid)),await D(),"/chat"===t&&r.get("id")===e.conv_uid&&n.push("/")}})},className:"del-btn invisible",children:(0,s.jsx)(P.Z,{})})]})})})},e.conv_uid)})})})})}),(0,s.jsxs)("div",{className:"flex flex-col justify-between flex-1",children:[(0,s.jsx)("div",{}),(0,s.jsx)(h.Z,{sx:{p:2,pt:3,pb:6,borderTop:"1px solid",borderColor:"divider",display:{xs:"none",sm:"initial"},position:"sticky",bottom:0,zIndex:100,background:"var(--joy-palette-background-body)"},children:(0,s.jsxs)(p.Z,{size:"sm",sx:{"--ListItem-radius":"8px"},children:[(0,s.jsx)(m.Z,{nested:!0,children:(0,s.jsx)(p.Z,{size:"sm","aria-labelledby":"nav-list-browse",sx:{"& .JoyListItemButton-root":{p:"8px"}},children:z.map(e=>(0,s.jsx)(d(),{href:e.route,children:(0,s.jsx)(m.Z,{children:(0,s.jsxs)(v.Z,{color:"neutral",sx:{marginBottom:1,height:"2.5rem"},selected:e.active,variant:e.active?"soft":"plain",children:[(0,s.jsx)(y.Z,{sx:{color:e.active?"inherit":"neutral.500"},children:e.icon}),(0,s.jsx)(j.Z,{children:e.label})]})})},e.route))})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(v.Z,{sx:{height:"2.5rem"},onClick:()=>{"light"===E?S("dark"):S("light")},children:[(0,s.jsx)(y.Z,{children:"dark"===E?(0,s.jsx)(Z.Z,{fontSize:"small"}):(0,s.jsx)(w.Z,{fontSize:"small"})}),(0,s.jsx)(j.Z,{children:"Theme"})]})})]})})]})]})})]})},E=r(29720),S=r(41287),z=r(38230);let F=(0,S.Z)({colorSchemes:{light:{palette:{mode:"dark",primary:{...z.Z.grey,solidBg:"#dfdfdf91",solidColor:"#4e4e4e",solidHoverBg:"#d5d5d5",outlinedColor:"#4e4e59"},neutral:{plainColor:"#4d4d4d",plainHoverColor:"#131318",plainHoverBg:"#EBEBEF",plainActiveBg:"#D8D8DF",plainDisabledColor:"#B9B9C6"},background:{body:"#fff",surface:"#fff"},text:{primary:"#505050"}}},dark:{palette:{mode:"light",primary:{...z.Z.grey,softBg:"#353539",softHoverBg:"#35353978",softDisabledBg:"#353539"},neutral:{plainColor:"#D8D8DF",plainHoverColor:"#F7F7F8",plainHoverBg:"#353539",plainActiveBg:"#434356",plainDisabledColor:"#434356",outlinedBorder:"#353539",outlinedHoverBorder:"#454651"},text:{primary:"#EBEBEF"},background:{body:"#212121",surface:"#525262"}}}},fontFamily:{body:"Josefin Sans, sans-serif",display:"Josefin Sans, sans-serif"},typography:{display1:{background:"linear-gradient(-30deg, var(--joy-palette-primary-900), var(--joy-palette-primary-400))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});var H=r(53794),T=r.n(H),O=r(54486),I=r.n(O);let J=0;function L(){"loading"!==i&&(i="loading",n=setTimeout(function(){I().start()},250))}function A(){J>0||(i="stop",clearTimeout(n),I().done())}if(T().events.on("routeChangeStart",L),T().events.on("routeChangeComplete",A),T().events.on("routeChangeError",A),"function"==typeof(null==window?void 0:window.fetch)){let e=window.fetch;window.fetch=async function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];0===J&&L(),J++;try{let t=await e(...r);return t}catch(e){return Promise.reject(e)}finally{0==(J-=1)&&A()}}}function W(){return null}var K=function(e){let{children:t}=e;return(0,s.jsx)("html",{lang:"en",className:"h-full font-sans",children:(0,s.jsx)("body",{className:"h-full font-sans",children:(0,s.jsx)(E.Z,{theme:F,children:(0,s.jsxs)(u.lL,{theme:F,defaultMode:"light",children:[(0,s.jsx)(W,{}),(0,s.jsx)(N.ZP,{children:(0,s.jsx)("div",{className:"contents h-full",children:(0,s.jsxs)("div",{className:"grid h-full w-screen grid-cols-1 grid-rows-[auto,1fr] overflow-hidden text-smd dark:text-gray-300 md:grid-cols-[280px,1fr] md:grid-rows-[1fr]",children:[(0,s.jsx)(D,{}),(0,s.jsx)("div",{className:"relative min-h-0 min-w-0",children:t})]})})})]})})})})}},78915:function(e,t,r){"use strict";r.d(t,{T:function(){return d},K:function(){return c}});var n=r(21628),i=r(24214);let s=i.Z.create({baseURL:"http://localhost:5000"});s.defaults.timeout=1e4,s.interceptors.response.use(e=>e.data,e=>Promise.reject(e));var l=r(84835);let a={"content-type":"application/json"},o=e=>{if(!(0,l.isPlainObject)(e))return JSON.stringify(e);let t={...e};for(let e in t){let r=t[e];"string"==typeof r&&(t[e]=r.trim())}return JSON.stringify(t)},d=(e,t)=>{if(t){let r=Object.keys(t).filter(e=>void 0!==t[e]&&""!==t[e]).map(e=>"".concat(e,"=").concat(t[e])).join("&");r&&(e+="?".concat(r))}return s.get("/api"+e,{headers:a}).then(e=>e).catch(e=>{n.ZP.error(e),Promise.reject(e)})},c=(e,t)=>{let r=o(t);return s.post("/api"+e,{body:r,headers:a}).then(e=>e).catch(e=>{n.ZP.error(e),Promise.reject(e)})}},97402:function(){},23517:function(){}},function(e){e.O(0,[180,430,577,635,562,456,440,672,751,216,253,769,744],function(){return e(e.s=91541)}),_N_E=e.O()}]);