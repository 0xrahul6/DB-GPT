(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{72431:function(){},91909:function(e,t,n){Promise.resolve().then(n.bind(n,16763))},57931:function(e,t,n){"use strict";n.d(t,{ZP:function(){return d},Cg:function(){return i}});var a=n(9268),r=n(11196),s=n(86006),o=n(56008),l=n(30297);let[i,c]=function(){let e=s.createContext(void 0);return[function(){let t=s.useContext(e);if(void 0===t)throw Error("useCtx must be inside a Provider with a value");return t},e.Provider]}();var d=e=>{let{children:t}=e,n=(0,o.useSearchParams)(),i=n.get("id"),d=n.get("scene"),[u,h]=s.useState(!1),[m,_]=s.useState("chat_dashboard"!==d),{run:f,data:p=[],refresh:x}=(0,r.Z)(async()=>{let[,e]=await (0,l.Vx)((0,l.Js)());return null!=e?e:[]},{manual:!0}),g=(0,s.useMemo)(()=>p.find(e=>e.conv_uid===i),[i,p]);return(0,a.jsx)(c,{value:{isContract:u,isMenuExpand:m,dialogueList:p,setIsContract:h,setIsMenuExpand:_,queryDialogueList:f,refreshDialogList:x,currentDialogue:g},children:t})}},16763:function(e,t,n){"use strict";let a,r;n.r(t),n.d(t,{default:function(){return ee}});var s=n(9268);n(97402),n(23517);var o=n(23412),l=n(76708);o.ZP.use(l.Db).init({resources:{en:{translation:{Knowledge_Space:"Knowledge Space",space:"space",Vector:"Vector",Owner:"Owner",Docs:"Docs",Knowledge_Space_Config:"Knowledge Space Config",Choose_a_Datasource_type:"Choose a Datasource type",Setup_the_Datasource:"Setup the Datasource",Knowledge_Space_Name:"Knowledge Space Name",Please_input_the_name:"Please input the name",Please_input_the_owner:"Please input the owner",Description:"Description",Please_input_the_description:"Please input the description",Next:"Next",the_name_can_only_contain:'the name can only contain numbers, letters, Chinese characters, "-" and "_"',Text:"Text","Fill your raw text":"Fill your raw text",URL:"URL",Fetch_the_content_of_a_URL:"Fetch the content of a URL",Document:"Document",Upload_a_document:"Upload a document, document type can be PDF, CSV, Text, PowerPoint, Word, Markdown",Name:"Name",Text_Source:"Text Source(Optional)",Please_input_the_text_source:"Please input the text source",Synch:"Synch",Back:"Back",Finish:"Finish",Web_Page_URL:"Web Page URL",Please_input_the_Web_Page_URL:"Please input the Web Page URL",Select_or_Drop_file:"Select or Drop file",Documents:"Documents",Chat:"Chat",Add_Datasource:"Add Datasource",Arguments:"Arguments",Type:"Type",Size:"Size",Last_Synch:"Last Synch",Status:"Status",Result:"Result",Details:"Details",Delete:"Delete",Operation:"Operation",Submit:"Submit",Chunks:"Chunks",Content:"Content",Meta_Data:"Meta Data",Please_select_a_file:"Please select a file",Please_input_the_text:"Please input the text",Embedding:"Embedding",topk:"topk",the_top_k_vectors:"the top k vectors based on similarity score",recall_score:"recall_score",Set_a_threshold_score:"Set a threshold score for the retrieval of similar vectors",recall_type:"recall_type",Recall_Type:"recall type",model:"model",A_model_used:"A model used to create vector representations of text or other data",chunk_size:"chunk_size",The_size_of_the_data_chunks:"The size of the data chunks used in processing",chunk_overlap:"chunk_overlap",The_amount_of_overlap:"The amount of overlap between adjacent data chunks",Prompt:"Prompt",scene:"scene",A_contextual_parameter:"A contextual parameter used to define the setting or environment in which the prompt is being used",template:"template",structure_or_format:"A pre-defined structure or format for the prompt, which can help ensure that the AI system generates responses that are consistent with the desired style or tone.",max_token:"max_token",The_maximum_number_of_tokens:"The maximum number of tokens or words allowed in a prompt",Theme:"Theme",Port:"Port",Username:"Username",Password:"Password",Remark:"Remark",Edit:"Edit",Database:"Database",Data_Source:"Data Source",Close_Sidebar:"Close Sidebar",Switch_Language:"Switch Language"}},zh:{translation:{Knowledge_Space:"知识库",space:"知识库",Vector:"向量",Owner:"创建人",Docs:"文档数",Knowledge_Space_Config:"知识库配置",Choose_a_Datasource_type:"选择数据源类型",Setup_the_Datasource:"设置数据源",Knowledge_Space_Name:"知识库名称",Please_input_the_name:"请输入名称",Please_input_the_owner:"请输入创建人",Description:"描述",Please_input_the_description:"请输入描述",Next:"下一步",the_name_can_only_contain:"名称只能包含数字、字母、中文字符、-或_",Text:"文本","Fill your raw text":"填写您的原始文本",URL:"网址",Fetch_the_content_of_a_URL:"获取 URL 的内容",Document:"文档",Upload_a_document:"上传文档，文档类型可以是PDF、CSV、Text、PowerPoint、Word、Markdown",Name:"名称",Text_Source:"文本来源（可选）",Please_input_the_text_source:"请输入文本来源",Synch:"同步",Back:"上一步",Finish:"完成",Web_Page_URL:"网页网址",Please_input_the_Web_Page_URL:"请输入网页网址",Select_or_Drop_file:"选择或拖拽文件",Documents:"文档",Chat:"对话",Add_Datasource:"添加数据源",Arguments:"参数",Type:"类型",Size:"切片",Last_Synch:"上次同步时间",Status:"状态",Result:"结果",Details:"明细",Delete:"删除",Operation:"操作",Submit:"提交",Chunks:"切片",Content:"内容",Meta_Data:"元数据",Please_select_a_file:"请上传一个文件",Please_input_the_text:"请输入文本",Embedding:"嵌入",topk:"球",the_top_k_vectors:"基于相似度得分的前 k 个向量",recall_score:"召回分数",Set_a_threshold_score:"设置相似向量检索的阈值分数",recall_type:"回忆类型",Recall_Type:"回忆类型",model:"模型",A_model_used:"用于创建文本或其他数据的矢量表示的模型",chunk_size:"块大小",The_size_of_the_data_chunks:"处理中使用的数据块的大小",chunk_overlap:"块重叠",The_amount_of_overlap:"相邻数据块之间的重叠量",Prompt:"迅速的",scene:"场景",A_contextual_parameter:"用于定义使用提示的设置或环境的上下文参数",template:"模板",structure_or_format:"预定义的提示结构或格式，有助于确保人工智能系统生成与所需风格或语气一致的响应。",max_token:"最大令牌",The_maximum_number_of_tokens:"提示中允许的最大标记或单词数",Theme:"主题",Port:"端口",Username:"用户名",Password:"密码",Remark:"备注",Edit:"编辑",Database:"数据库",Data_Source:"数据源",Close_Sidebar:"关闭侧边栏",Switch_Language:"切换语言"}}},lng:"en",interpolation:{escapeValue:!1}});var i=n(86006),c=n(56008),d=n(35846),u=n.n(d),h=n(30741),m=n(78635),_=n(90545),f=n(53113),p=n(18818),x=n(4882),g=n(70092),v=n(64579),j=n(22046),b=n(53047),w=n(62921),y=n(35891),S=n(40020),Z=n(11515),k=n(84892),P=n(98703),D=n(57931),C=n(66664),N=n(78915),L=n(76394),T=n.n(L),B=n(8683),z=n.n(B),E=n(601),R=n(15473),F=n(84961),U=n(21354),A=()=>{let e=(0,c.usePathname)(),{t,i18n:n}=(0,l.$G)(),a=(0,c.useSearchParams)(),r=a.get("id"),o=(0,c.useRouter)(),[d,L]=(0,i.useState)("/LOGO_1.png"),{dialogueList:B,queryDialogueList:A,refreshDialogList:O,isMenuExpand:K,setIsMenuExpand:W}=(0,D.Cg)(),{mode:I,setMode:H}=(0,m.tv)(),M=(0,i.useMemo)(()=>[{label:t("Data_Source"),route:"/database",icon:(0,s.jsx)(R.Z,{fontSize:"small"}),tooltip:"Database",active:"/database"===e},{label:t("Knowledge_Space"),route:"/datastores",icon:(0,s.jsx)(S.Z,{fontSize:"small"}),tooltip:"Knowledge",active:"/datastores"===e}],[e,n.language]);function J(){"light"===I?H("dark"):H("light")}return(0,i.useEffect)(()=>{"light"===I?L("/LOGO_1.png"):L("/WHITE_LOGO.png")},[I]),(0,i.useEffect)(()=>{(async()=>{await A()})()},[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("nav",{className:z()("grid max-h-screen h-full max-md:hidden"),children:(0,s.jsx)(_.Z,{className:"flex flex-col border-r border-divider max-h-screen sticky left-0 top-0 overflow-hidden",children:K?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.Z,{className:"p-2 gap-2 flex flex-row justify-between items-center",children:(0,s.jsx)("div",{className:"flex items-center gap-3",children:(0,s.jsx)(T(),{src:d,alt:"DB-GPT",width:633,height:157,className:"w-full max-w-full",unoptimized:!0})})}),(0,s.jsx)(_.Z,{className:"px-2",children:(0,s.jsx)(u(),{href:"/",children:(0,s.jsx)(f.Z,{color:"primary",className:"w-full bg-gradient-to-r from-[#31afff] to-[#1677ff] dark:bg-gradient-to-r dark:from-[#6a6a6a] dark:to-[#80868f]",style:{color:"#fff"},children:"+ New Chat"})})}),(0,s.jsx)(_.Z,{className:"p-2 hidden xs:block sm:inline-block max-h-full overflow-auto",children:(0,s.jsx)(p.Z,{size:"sm",sx:{"--ListItem-radius":"8px"},children:(0,s.jsx)(x.Z,{nested:!0,children:(0,s.jsx)(p.Z,{size:"sm","aria-labelledby":"nav-list-browse",sx:{"& .JoyListItemButton-root":{p:"8px"},gap:"4px"},children:B.map(t=>{let n=("/chat"===e||"/chat/"===e)&&r===t.conv_uid;return(0,s.jsx)(x.Z,{children:(0,s.jsx)(g.Z,{selected:n,variant:n?"soft":"plain",sx:{"&:hover .del-btn":{visibility:"visible"}},children:(0,s.jsx)(v.Z,{children:(0,s.jsxs)(u(),{href:"/chat?id=".concat(t.conv_uid,"&scene=").concat(null==t?void 0:t.chat_mode),className:"flex items-center justify-between",children:[(0,s.jsxs)(j.ZP,{fontSize:14,noWrap:!0,children:[(0,s.jsx)(P.Z,{style:{marginRight:"0.5rem"}}),(null==t?void 0:t.user_name)||(null==t?void 0:t.user_input)||"undefined"]}),(0,s.jsx)(b.ZP,{color:"neutral",variant:"plain",size:"sm",onClick:n=>{n.preventDefault(),n.stopPropagation(),h.Z.confirm({title:"Delete Chat",content:"Are you sure delete this chat?",width:"276px",centered:!0,async onOk(){await (0,N.Kw)("/v1/chat/dialogue/delete?con_uid=".concat(t.conv_uid)),await O(),"/chat"===e&&a.get("id")===t.conv_uid&&o.push("/")}})},className:"del-btn invisible",children:(0,s.jsx)(C.Z,{})})]})})})},t.conv_uid)})})})})}),(0,s.jsx)("div",{className:"flex flex-col justify-end flex-1",children:(0,s.jsx)(_.Z,{className:"p-2 pt-3 pb-6 border-t border-divider xs:block sticky bottom-0 z-100",children:(0,s.jsxs)(p.Z,{size:"sm",sx:{"--ListItem-radius":"8px"},children:[(0,s.jsx)(x.Z,{nested:!0,children:(0,s.jsx)(p.Z,{size:"sm","aria-labelledby":"nav-list-browse",sx:{"& .JoyListItemButton-root":{p:"8px"}},children:M.map(e=>(0,s.jsx)(u(),{href:e.route,children:(0,s.jsx)(x.Z,{children:(0,s.jsxs)(g.Z,{color:"neutral",sx:{marginBottom:1,height:"2.5rem"},selected:e.active,variant:e.active?"soft":"plain",children:[(0,s.jsx)(w.Z,{sx:{color:e.active?"inherit":"neutral.500"},children:e.icon}),(0,s.jsx)(v.Z,{children:e.label})]})})},e.route))})}),(0,s.jsx)(x.Z,{children:(0,s.jsxs)(g.Z,{className:"h-10",onClick:J,children:[(0,s.jsx)(y.Z,{title:"Theme",children:(0,s.jsx)(w.Z,{children:"dark"===I?(0,s.jsx)(Z.Z,{fontSize:"small"}):(0,s.jsx)(k.Z,{fontSize:"small"})})}),(0,s.jsx)(v.Z,{children:t("Theme")})]})}),(0,s.jsx)(x.Z,{children:(0,s.jsxs)(g.Z,{className:"h-10",onClick:()=>{let e="en"===n.language?"zh":"en";n.changeLanguage(e),window.localStorage.setItem("db_gpt_lng",e)},children:[(0,s.jsx)(y.Z,{title:"Switch Language",children:(0,s.jsx)(w.Z,{className:"text-2xl",children:(0,s.jsx)(U.Z,{fontSize:"small"})})}),(0,s.jsx)(v.Z,{children:t("Switch_Language")})]})}),(0,s.jsx)(x.Z,{children:(0,s.jsxs)(g.Z,{className:"h-10",onClick:()=>{W(!1)},children:[(0,s.jsx)(y.Z,{title:"Close Sidebar",children:(0,s.jsx)(w.Z,{className:"text-2xl",children:(0,s.jsx)(F.Z,{className:"transform rotate-90",fontSize:"small"})})}),(0,s.jsx)(v.Z,{children:t("Close_Sidebar")})]})})]})})})]}):(0,s.jsxs)(_.Z,{className:"h-full py-6 flex flex-col justify-between",children:[(0,s.jsx)(_.Z,{className:"flex justify-center items-center",children:(0,s.jsx)(y.Z,{title:"Menu",children:(0,s.jsx)(E.Z,{className:"cursor-pointer text-2xl",onClick:()=>{W(!0)}})})}),(0,s.jsxs)(_.Z,{className:"flex flex-col gap-4 justify-center items-center",children:[M.map((e,t)=>(0,s.jsx)("div",{className:"flex justify-center text-2xl cursor-pointer",children:(0,s.jsx)(y.Z,{title:e.tooltip,children:e.icon})},"menu_".concat(t))),(0,s.jsx)(x.Z,{children:(0,s.jsx)(g.Z,{onClick:J,children:(0,s.jsx)(y.Z,{title:"Theme",children:(0,s.jsx)(w.Z,{className:"text-2xl",children:"dark"===I?(0,s.jsx)(Z.Z,{fontSize:"small"}):(0,s.jsx)(k.Z,{fontSize:"small"})})})})}),(0,s.jsx)(x.Z,{children:(0,s.jsx)(g.Z,{onClick:()=>{W(!0)},children:(0,s.jsx)(y.Z,{title:"Expand Sidebar",children:(0,s.jsx)(w.Z,{className:"text-2xl",children:(0,s.jsx)(F.Z,{className:"transform rotate-90",fontSize:"small"})})})})})]})]})})})})},O=n(29720),K=n(41287),W=n(38230);let I=(0,K.Z)({colorSchemes:{light:{palette:{mode:"dark",primary:{...W.Z.grey,solidBg:"#e6f4ff",solidColor:"#1677ff",solidHoverBg:"#e6f4ff"},neutral:{plainColor:"#4d4d4d",plainHoverColor:"#131318",plainHoverBg:"#EBEBEF",plainActiveBg:"#D8D8DF",plainDisabledColor:"#B9B9C6"},background:{body:"#fff",surface:"#fff"},text:{primary:"#505050"}}},dark:{palette:{mode:"light",primary:{...W.Z.grey,softBg:"#353539",softHoverBg:"#35353978",softDisabledBg:"#353539",solidBg:"#51525beb",solidHoverBg:"#51525beb"},neutral:{plainColor:"#D8D8DF",plainHoverColor:"#F7F7F8",plainHoverBg:"#353539",plainActiveBg:"#434356",plainDisabledColor:"#434356",outlinedBorder:"#353539",outlinedHoverBorder:"#454651"},text:{primary:"#EBEBEF"},background:{body:"#212121",surface:"#51525beb"}}}},fontFamily:{body:"Josefin Sans, sans-serif",display:"Josefin Sans, sans-serif"},typography:{display1:{background:"linear-gradient(-30deg, var(--joy-palette-primary-900), var(--joy-palette-primary-400))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},zIndex:{modal:1001}});var H=n(53794),M=n.n(H),J=n(54486),V=n.n(J);let G=0;function $(){"loading"!==r&&(r="loading",a=setTimeout(function(){V().start()},250))}function q(){G>0||(r="stop",clearTimeout(a),V().done())}if(M().events.on("routeChangeStart",$),M().events.on("routeChangeComplete",q),M().events.on("routeChangeError",q),"function"==typeof(null==window?void 0:window.fetch)){let e=window.fetch;window.fetch=async function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];0===G&&$(),G++;try{let t=await e(...n);return t}catch(e){return Promise.reject(e)}finally{0==(G-=1)&&q()}}}function X(){return null}function Q(e){let{children:t}=e,{i18n:n}=(0,l.$G)(),{mode:a}=(0,m.tv)(),r=i.useRef(null);return(0,i.useEffect)(()=>{if((null==r?void 0:r.current)&&a){var e,t,n,s,o,l;null==r||null===(e=r.current)||void 0===e||null===(t=e.classList)||void 0===t||t.add(a),"light"===a?null==r||null===(n=r.current)||void 0===n||null===(s=n.classList)||void 0===s||s.remove("dark"):null==r||null===(o=r.current)||void 0===o||null===(l=o.classList)||void 0===l||l.remove("light")}},[r,a]),(0,i.useLayoutEffect)(()=>{n.changeLanguage(window.localStorage.getItem("db_gpt_lng")||"en")},[]),(0,s.jsxs)("div",{ref:r,className:"h-full",children:[(0,s.jsx)(X,{}),(0,s.jsx)(D.ZP,{children:t})]})}function Y(e){let{children:t}=e,{isContract:n,isMenuExpand:a}=(0,D.Cg)();return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("div",{className:z()("grid h-full w-full grid-cols-1 grid-rows-[auto,1fr] text-smd dark:text-gray-300 md:grid-rows-[1fr] transition-width duration-500",{"md:grid-cols-[280px,1fr]":a,"md:grid-cols-[60px,1fr]":!a}),children:[(0,s.jsx)(A,{}),(0,s.jsx)("div",{className:z()("flex flex-col flex-1 relative overflow-hidden px-3",{"w-[calc(100vw - 76px)]":n}),children:t})]})})}var ee=function(e){let{children:t}=e;return(0,s.jsx)("html",{lang:"en",className:"h-full font-sans",children:(0,s.jsx)("body",{className:"h-full font-sans",children:(0,s.jsx)(O.Z,{theme:I,children:(0,s.jsx)(m.lL,{theme:I,defaultMode:"light",children:(0,s.jsx)(Q,{children:(0,s.jsx)("div",{className:"contents h-full",children:(0,s.jsx)(Y,{children:t})})})})})})})}},30297:function(e,t,n){"use strict";n.d(t,{HT:function(){return g},a4:function(){return v},Vx:function(){return o},XN:function(){return l},BJ:function(){return i},Js:function(){return h},j8:function(){return _},rw:function(){return u},LM:function(){return c},G9:function(){return d},qn:function(){return f},vD:function(){return m}});var a,r=n(24214),s=n(21628);let o=(e,t)=>e.then(e=>{let{data:n}=e;if(!n)throw Error("Network Error!");if(!n.success&&t&&"*"!==t&&n.err_code&&t.includes(n.err_code)){var a;throw s.ZP.error(n.err_msg),Error(null!==(a=n.err_msg)&&void 0!==a?a:"")}return[null,n.data,n,e]}).catch(e=>[e,null,null,null]),l=()=>g("/chat/db/list"),i=()=>g("/chat/db/support/type"),c=e=>v("/chat/db/delete?db_name=".concat(e),void 0),d=e=>v("/chat/db/edit",e),u=e=>v("/chat/db/add",e),h=()=>g("/chat/dialogue/list"),m=e=>v("/chat/mode/params/list?chat_mode=".concat(e)),_=e=>g("/chat/dialogue/messages/history?con_uid=".concat(e)),f=e=>{let{convUid:t,chatMode:n,data:a,config:r}=e;return v("/chat/mode/params/file/load?conv_uid=".concat(t,"&chat_mode=").concat(n),a,{headers:{"Content-Type":"multipart/form-data"},...r})};var p=n(52040);let x=r.Z.create({baseURL:"".concat(null!==(a=p.env.API_BASE_URL)&&void 0!==a?a:"","/api/v1"),timeout:1e4}),g=(e,t,n)=>x.get(e,{params:t,...n}),v=(e,t,n)=>x.post(e,t,n)},78915:function(e,t,n){"use strict";n.d(t,{Tk:function(){return d},Kw:function(){return u},PR:function(){return h},Ej:function(){return m}});var a=n(21628),r=n(24214),s=n(52040);let o=r.Z.create({baseURL:s.env.API_BASE_URL});o.defaults.timeout=1e4,o.interceptors.response.use(e=>e.data,e=>Promise.reject(e));var l=n(84835);let i={"content-type":"application/json"},c=e=>{if(!(0,l.isPlainObject)(e))return JSON.stringify(e);let t={...e};for(let e in t){let n=t[e];"string"==typeof n&&(t[e]=n.trim())}return JSON.stringify(t)},d=(e,t)=>{if(t){let n=Object.keys(t).filter(e=>void 0!==t[e]&&""!==t[e]).map(e=>"".concat(e,"=").concat(t[e])).join("&");n&&(e+="?".concat(n))}return o.get("/api"+e,{headers:i}).then(e=>e).catch(e=>{a.ZP.error(e),Promise.reject(e)})},u=(e,t)=>{let n=c(t);return o.post("/api"+e,{body:n,headers:i}).then(e=>e).catch(e=>{a.ZP.error(e),Promise.reject(e)})},h=(e,t)=>o.post(e,t,{headers:i}).then(e=>e).catch(e=>{a.ZP.error(e),Promise.reject(e)}),m=(e,t)=>o.post(e,t).then(e=>e).catch(e=>{a.ZP.error(e),Promise.reject(e)})},97402:function(){},23517:function(){}},function(e){e.O(0,[180,355,932,358,191,230,715,196,15,394,635,686,741,83,253,769,744],function(){return e(e.s=91909)}),_N_E=e.O()}]);