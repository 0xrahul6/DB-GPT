(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{51499:function(e,t,i){"use strict";var n=i(78997);t.Z=void 0;var r=n(i(76906)),a=i(9268),o=(0,r.default)((0,a.jsx)("path",{d:"m7 10 5 5 5-5z"}),"ArrowDropDown");t.Z=o},44066:function(e,t,i){"use strict";var n=i(78997);t.Z=void 0;var r=n(i(76906)),a=i(9268),o=(0,r.default)((0,a.jsx)("path",{d:"m10 17 5-5-5-5v10z"}),"ArrowRight");t.Z=o},78141:function(e,t,i){"use strict";var n=i(78997);t.Z=void 0;var r=n(i(76906)),a=i(9268),o=(0,r.default)((0,a.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}),"Cached");t.Z=o},73220:function(e,t,i){"use strict";var n=i(78997);t.Z=void 0;var r=n(i(76906)),a=i(9268),o=(0,r.default)((0,a.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"}),"Chat");t.Z=o},59970:function(e,t,i){"use strict";var n=i(78997);t.Z=void 0;var r=n(i(76906)),a=i(9268),o=(0,r.default)((0,a.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline");t.Z=o},42414:function(e,t,i){Promise.resolve().then(i.bind(i,36906))},36906:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return ed}});var n=i(9268),r=i(56008),a=i(86006),o=i(50645),s=i(5737),l=i(78635),d=i(80937),c=i(44334),h=i(311),x=i(22046),p=i(53113),u=i(83192),m=i(46750),g=i(40431),v=i(89791),f=i(47562),j=i(46319),Z=i(53832),C=i(49657),b=i(88930),y=i(47093),w=i(18587);function P(e){return(0,w.d6)("MuiChip",e)}let S=(0,w.sI)("MuiChip",["root","clickable","colorPrimary","colorNeutral","colorDanger","colorInfo","colorSuccess","colorWarning","colorContext","disabled","endDecorator","focusVisible","label","labelSm","labelMd","labelLg","sizeSm","sizeMd","sizeLg","startDecorator","variantPlain","variantSolid","variantSoft","variantOutlined"]),k=a.createContext({disabled:void 0,variant:void 0,color:void 0});var _=i(326);let z=["children","className","color","onClick","disabled","size","variant","startDecorator","endDecorator","component","slots","slotProps"],R=e=>{let{disabled:t,size:i,color:n,clickable:r,variant:a,focusVisible:o}=e,s={root:["root",t&&"disabled",n&&`color${(0,Z.Z)(n)}`,i&&`size${(0,Z.Z)(i)}`,a&&`variant${(0,Z.Z)(a)}`,r&&"clickable"],action:["action",t&&"disabled",o&&"focusVisible"],label:["label",i&&`label${(0,Z.Z)(i)}`],startDecorator:["startDecorator"],endDecorator:["endDecorator"]};return(0,f.Z)(s,P,{})},D=(0,o.Z)("div",{name:"JoyChip",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e,ownerState:t})=>{var i,n,r,a;return[(0,g.Z)({"--Chip-decoratorChildOffset":"min(calc(var(--Chip-paddingInline) - (var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2), var(--Chip-paddingInline))","--Chip-decoratorChildRadius":"max(var(--_Chip-radius) - var(--variant-borderWidth, 0px) - var(--_Chip-paddingBlock), min(var(--_Chip-paddingBlock) + var(--variant-borderWidth, 0px), var(--_Chip-radius) / 2))","--Chip-deleteRadius":"var(--Chip-decoratorChildRadius)","--Chip-deleteSize":"var(--Chip-decoratorChildHeight)","--Avatar-radius":"var(--Chip-decoratorChildRadius)","--Avatar-size":"var(--Chip-decoratorChildHeight)","--Icon-margin":"initial","--unstable_actionRadius":"var(--_Chip-radius)"},"sm"===t.size&&{"--Chip-gap":"0.25rem","--Chip-paddingInline":"0.5rem","--Chip-decoratorChildHeight":"calc(min(1.125rem, var(--_Chip-minHeight)) - 2 * var(--variant-borderWidth, 0px))","--Icon-fontSize":"calc(var(--_Chip-minHeight) / 1.714)","--_Chip-minHeight":"var(--Chip-minHeight, 1.5rem)",fontSize:e.vars.fontSize.xs},"md"===t.size&&{"--Chip-gap":"0.375rem","--Chip-paddingInline":"0.75rem","--Chip-decoratorChildHeight":"min(1.375rem, var(--_Chip-minHeight))","--Icon-fontSize":"calc(var(--_Chip-minHeight) / 1.778)","--_Chip-minHeight":"var(--Chip-minHeight, 2rem)",fontSize:e.vars.fontSize.sm},"lg"===t.size&&{"--Chip-gap":"0.5rem","--Chip-paddingInline":"1rem","--Chip-decoratorChildHeight":"min(1.75rem, var(--_Chip-minHeight))","--Icon-fontSize":"calc(var(--_Chip-minHeight) / 2)","--_Chip-minHeight":"var(--Chip-minHeight, 2.5rem)",fontSize:e.vars.fontSize.md},{"--_Chip-radius":"var(--Chip-radius, 1.5rem)","--_Chip-paddingBlock":"max((var(--_Chip-minHeight) - 2 * var(--variant-borderWidth, 0px) - var(--Chip-decoratorChildHeight)) / 2, 0px)",minHeight:"var(--_Chip-minHeight)",maxWidth:"max-content",paddingInline:"var(--Chip-paddingInline)",borderRadius:"var(--_Chip-radius)",position:"relative",fontWeight:e.vars.fontWeight.md,fontFamily:e.vars.fontFamily.body,display:"inline-flex",alignItems:"center",justifyContent:"center",whiteSpace:"nowrap",textDecoration:"none",verticalAlign:"middle",boxSizing:"border-box",[`&.${S.disabled}`]:{color:null==(i=e.variants[`${t.variant}Disabled`])||null==(i=i[t.color])?void 0:i.color}}),...t.clickable?[{"--variant-borderWidth":"0px",color:null==(a=e.variants[t.variant])||null==(a=a[t.color])?void 0:a.color}]:[null==(n=e.variants[t.variant])?void 0:n[t.color],{[`&.${S.disabled}`]:null==(r=e.variants[`${t.variant}Disabled`])?void 0:r[t.color]}]]}),I=(0,o.Z)("span",{name:"JoyChip",slot:"Label",overridesResolver:(e,t)=>t.label})(({ownerState:e})=>(0,g.Z)({display:"inline-block",overflow:"hidden",textOverflow:"ellipsis",order:1,minInlineSize:0,flexGrow:1},e.clickable&&{zIndex:1,pointerEvents:"none"})),B=(0,o.Z)("button",{name:"JoyChip",slot:"Action",overridesResolver:(e,t)=>t.action})(({theme:e,ownerState:t})=>{var i,n,r,a;return[{position:"absolute",zIndex:0,top:0,left:0,bottom:0,right:0,width:"100%",border:"none",cursor:"pointer",padding:"initial",margin:"initial",backgroundColor:"initial",textDecoration:"none",borderRadius:"inherit",[e.focus.selector]:e.focus.default},null==(i=e.variants[t.variant])?void 0:i[t.color],{"&:hover":null==(n=e.variants[`${t.variant}Hover`])?void 0:n[t.color]},{"&:active":null==(r=e.variants[`${t.variant}Active`])?void 0:r[t.color]},{[`&.${S.disabled}`]:null==(a=e.variants[`${t.variant}Disabled`])?void 0:a[t.color]}]}),H=(0,o.Z)("span",{name:"JoyChip",slot:"StartDecorator",overridesResolver:(e,t)=>t.startDecorator})({"--Avatar-marginInlineStart":"calc(var(--Chip-decoratorChildOffset) * -1)","--Chip-deleteMargin":"0 0 0 calc(var(--Chip-decoratorChildOffset) * -1)","--Icon-margin":"0 0 0 calc(var(--Chip-paddingInline) / -4)",display:"inherit",marginInlineEnd:"var(--Chip-gap)",order:0,zIndex:1,pointerEvents:"none"}),L=(0,o.Z)("span",{name:"JoyChip",slot:"EndDecorator",overridesResolver:(e,t)=>t.endDecorator})({"--Chip-deleteMargin":"0 calc(var(--Chip-decoratorChildOffset) * -1) 0 0","--Icon-margin":"0 calc(var(--Chip-paddingInline) / -4) 0 0",display:"inherit",marginInlineStart:"var(--Chip-gap)",order:2,zIndex:1,pointerEvents:"none"}),T=a.forwardRef(function(e,t){let i=(0,b.Z)({props:e,name:"JoyChip"}),{children:r,className:o,color:s="primary",onClick:l,disabled:d=!1,size:c="md",variant:h="solid",startDecorator:x,endDecorator:p,component:u,slots:f={},slotProps:Z={}}=i,w=(0,m.Z)(i,z),{getColor:P}=(0,y.VT)(h),S=P(e.color,s),T=!!l||!!Z.action,N=(0,g.Z)({},i,{disabled:d,size:c,color:S,variant:h,clickable:T,focusVisible:!1}),F="function"==typeof Z.action?Z.action(N):Z.action,O=a.useRef(null),{focusVisible:A,getRootProps:E}=(0,j.Z)((0,g.Z)({},F,{disabled:d,rootRef:O}));N.focusVisible=A;let M=R(N),W=(0,g.Z)({},w,{component:u,slots:f,slotProps:Z}),[V,U]=(0,_.Z)("root",{ref:t,className:(0,v.Z)(M.root,o),elementType:D,externalForwardedProps:W,ownerState:N}),[$,G]=(0,_.Z)("label",{className:M.label,elementType:I,externalForwardedProps:W,ownerState:N}),J=(0,C.Z)(G.id),[Y,K]=(0,_.Z)("action",{className:M.action,elementType:B,externalForwardedProps:W,ownerState:N,getSlotProps:E,additionalProps:{"aria-labelledby":J,as:null==F?void 0:F.component,onClick:l}}),[X,q]=(0,_.Z)("startDecorator",{className:M.startDecorator,elementType:H,externalForwardedProps:W,ownerState:N}),[Q,ee]=(0,_.Z)("endDecorator",{className:M.endDecorator,elementType:L,externalForwardedProps:W,ownerState:N}),et=a.useMemo(()=>({disabled:d,variant:h,color:"context"===S?void 0:S}),[S,d,h]);return(0,n.jsx)(k.Provider,{value:et,children:(0,n.jsxs)(V,(0,g.Z)({},U,{children:[T&&(0,n.jsx)(Y,(0,g.Z)({},K)),(0,n.jsx)($,(0,g.Z)({},G,{id:J,children:r})),x&&(0,n.jsx)(X,(0,g.Z)({},q,{children:x})),p&&(0,n.jsx)(Q,(0,g.Z)({},ee,{children:p}))]}))})});var N=i(81528),F=i(90545),O=i(35086),A=i(866),E=i(28086),M=i(65326),W=i.n(M),V=i(72474),U=i(59534),$=i(78141),G=i(68949),J=i(73220),Y=i(50157),K=i(23910),X=i(21628),q=i(1031),Q=i(78915),ee=i(89081),et=i(59970),ei=i(44066),en=i(51499),er=e=>{var t,i,r,o,l,c,h,x,u,m,g,v,f,j,Z,C,b,y;let{spaceName:w}=e,[P,S]=(0,a.useState)(!1),[k,_]=(0,a.useState)({}),[z,R]=(0,a.useState)(!1),[D,I]=(0,a.useState)(!1),{data:B}=(0,ee.Z)(()=>(0,Q.PR)("/knowledge/".concat(w,"/arguments")),{onSuccess(e){_(e.data)}});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.Z,{variant:"outlined",onClick:()=>S(!0),children:"Arguments"}),(0,n.jsx)(N.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center","z-index":1e3},open:P,onClose:()=>S(!1),children:(0,n.jsxs)(s.Z,{variant:"outlined",sx:{width:800,borderRadius:"md",p:3,boxShadow:"lg"},children:[(0,n.jsxs)(F.Z,{sx:{height:"500px",overflow:"auto","&::-webkit-scrollbar":{display:"none"}},children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(F.Z,{sx:{fontWeight:"bold",fontSize:"25px",marginBottom:"20px",cursor:"pointer"},onClick:()=>{R(e=>!e)},children:[z?(0,n.jsx)(ei.Z,{}):(0,n.jsx)(en.Z,{}),"embedding"]}),(0,n.jsxs)(F.Z,{sx:{height:z?"0px":void 0,overflow:"hidden"},children:[(0,n.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",sx:{marginTop:"20px",marginBottom:"20px"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"20px",flexGrow:"1",flexShrink:"1",marginRight:"30px"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"10px"},children:["topk",(0,n.jsx)(K.Z,{content:"the top k vectors based on similarity score",trigger:"hover",style:{marginLeft:"20px"},children:(0,n.jsx)(et.Z,{sx:{marginLeft:"10px"}})})]}),(0,n.jsx)(F.Z,{children:(0,n.jsx)(O.ZP,{defaultValue:(null==B?void 0:null===(t=B.data)||void 0===t?void 0:null===(i=t.embedding)||void 0===i?void 0:i.topk)||"",onChange:e=>{k.embedding.topk=e.target.value,_({...k})}})})]}),(0,n.jsxs)(F.Z,{sx:{marginBottom:"20px",flexGrow:"1",flexShrink:"1"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"10px"},children:["recall_score",(0,n.jsx)(K.Z,{content:"Set a threshold score for the retrieval of similar vectors",trigger:"hover",style:{marginLeft:"20px"},children:(0,n.jsx)(et.Z,{sx:{marginLeft:"10px"}})})]}),(0,n.jsx)(F.Z,{children:(0,n.jsx)(O.ZP,{defaultValue:(null==B?void 0:null===(r=B.data)||void 0===r?void 0:null===(o=r.embedding)||void 0===o?void 0:o.recall_score)||"",onChange:e=>{k.embedding.recall_score=e.target.value,_({...k})}})})]})]}),(0,n.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",sx:{marginTop:"20px",marginBottom:"20px"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"20px",flexGrow:"1",flexShrink:"1",marginRight:"30px"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"10px"},children:["recall_type",(0,n.jsx)(K.Z,{content:"recall type",trigger:"hover",style:{marginLeft:"20px"},children:(0,n.jsx)(et.Z,{sx:{marginLeft:"10px"}})})]}),(0,n.jsx)(F.Z,{children:(0,n.jsx)(O.ZP,{defaultValue:(null==B?void 0:null===(l=B.data)||void 0===l?void 0:null===(c=l.embedding)||void 0===c?void 0:c.recall_type)||"",onChange:e=>{k.embedding.recall_type=e.target.value,_({...k})}})})]}),(0,n.jsxs)(F.Z,{sx:{marginBottom:"20px",flexGrow:"1",flexShrink:"1"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"10px"},children:["model",(0,n.jsx)(K.Z,{content:"A model used to create vector representations of text or other data",trigger:"hover",style:{marginLeft:"20px"},children:(0,n.jsx)(et.Z,{sx:{marginLeft:"10px"}})})]}),(0,n.jsx)(F.Z,{children:(0,n.jsx)(O.ZP,{defaultValue:(null==B?void 0:null===(h=B.data)||void 0===h?void 0:null===(x=h.embedding)||void 0===x?void 0:x.model)||"",onChange:e=>{k.embedding.model=e.target.value,_({...k})}})})]})]}),(0,n.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",sx:{marginTop:"20px",marginBottom:"20px"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"20px",flexGrow:"1",flexShrink:"1",marginRight:"30px"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"10px"},children:["chunk_size",(0,n.jsx)(K.Z,{content:"The size of the data chunks used in processing",trigger:"hover",style:{marginLeft:"20px"},children:(0,n.jsx)(et.Z,{sx:{marginLeft:"10px"}})})]}),(0,n.jsx)(F.Z,{children:(0,n.jsx)(O.ZP,{defaultValue:(null==B?void 0:null===(u=B.data)||void 0===u?void 0:null===(m=u.embedding)||void 0===m?void 0:m.chunk_size)||"",onChange:e=>{k.embedding.chunk_size=e.target.value,_({...k})}})})]}),(0,n.jsxs)(F.Z,{sx:{marginBottom:"20px",flexGrow:"1",flexShrink:"1"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"10px"},children:["chunk_overlap",(0,n.jsx)(K.Z,{content:"The amount of overlap between adjacent data chunks",trigger:"hover",style:{marginLeft:"20px"},children:(0,n.jsx)(et.Z,{sx:{marginLeft:"10px"}})})]}),(0,n.jsx)(F.Z,{children:(0,n.jsx)(O.ZP,{defaultValue:(null==B?void 0:null===(g=B.data)||void 0===g?void 0:null===(v=g.embedding)||void 0===v?void 0:v.chunk_overlap)||"",onChange:e=>{k.embedding.chunk_overlap=e.target.value,_({...k})}})})]})]})]})]}),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(F.Z,{sx:{fontWeight:"bold",fontSize:"25px",marginBottom:"20px",cursor:"pointer"},onClick:()=>{I(e=>!e)},children:[D?(0,n.jsx)(ei.Z,{}):(0,n.jsx)(en.Z,{}),"prompt"]}),(0,n.jsxs)(F.Z,{sx:{height:D?"0px":void 0,overflow:"hidden"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"20px"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"10px"},children:["scene",(0,n.jsx)(K.Z,{content:"A contextual parameter used to define the setting or environment in which the prompt is being used",trigger:"hover",style:{marginLeft:"20px"},children:(0,n.jsx)(et.Z,{sx:{marginLeft:"10px"}})})]}),(0,n.jsx)(F.Z,{children:(0,n.jsx)(A.Z,{minRows:5,defaultValue:(null==B?void 0:null===(f=B.data)||void 0===f?void 0:null===(j=f.prompt)||void 0===j?void 0:j.scene)||"",onChange:e=>{k.prompt.scene=e.target.value,_({...k})}})})]}),(0,n.jsxs)(F.Z,{sx:{marginBottom:"20px"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"10px"},children:["template",(0,n.jsx)(K.Z,{content:"A pre-defined structure or format for the prompt, which can help ensure that the AI system generates responses that are consistent with the desired style or tone.",trigger:"hover",style:{marginLeft:"20px"},children:(0,n.jsx)(et.Z,{sx:{marginLeft:"10px"}})})]}),(0,n.jsx)(F.Z,{children:(0,n.jsx)(A.Z,{minRows:5,defaultValue:(null==B?void 0:null===(Z=B.data)||void 0===Z?void 0:null===(C=Z.prompt)||void 0===C?void 0:C.template)||"",onChange:e=>{k.prompt.template=e.target.value,_({...k})}})})]}),(0,n.jsxs)(F.Z,{sx:{marginBottom:"20px"},children:[(0,n.jsxs)(F.Z,{sx:{marginBottom:"10px"},children:["max_token",(0,n.jsx)(K.Z,{content:"The maximum number of tokens or words allowed in a prompt",trigger:"hover",style:{marginLeft:"20px"},children:(0,n.jsx)(et.Z,{sx:{marginLeft:"10px"}})})]}),(0,n.jsx)(F.Z,{children:(0,n.jsx)(O.ZP,{defaultValue:(null==B?void 0:null===(b=B.data)||void 0===b?void 0:null===(y=b.prompt)||void 0===y?void 0:y.max_token)||"",onChange:e=>{k.prompt.max_token=e.target.value,_({...k})}})})]})]})]})]}),(0,n.jsx)(d.Z,{direction:"row",justifyContent:"flex-start",sx:{marginTop:"20px",marginBottom:"20px"},children:(0,n.jsx)(p.Z,{variant:"outlined",onClick:()=>{(0,Q.PR)("/knowledge/".concat(w,"/argument/save"),{argument:JSON.stringify(k)}).then(e=>{e.success?(window.location.reload(),X.ZP.success("success")):X.ZP.error(e.err_msg||"failed")})},children:"Submit"})})]})})]})};let{Dragger:ea}=Y.default,eo=(0,o.Z)(s.Z)(e=>{let{theme:t}=e;return{width:"50%",backgroundColor:"dark"===t.palette.mode?t.palette.background.level1:"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",borderRadius:4,color:t.vars.palette.text.secondary}}),es=["Choose a Datasource type","Setup the Datasource"],el=[{type:"text",title:"Text",subTitle:"Fill your raw text"},{type:"webPage",title:"URL",subTitle:"Fetch the content of a URL"},{type:"file",title:"Document",subTitle:"Upload a document, document type can be PDF, CSV, Text, PowerPoint, Word, Markdown"}];var ed=()=>{let e=(0,r.useRouter)(),t=(0,r.useSearchParams)().get("name"),{mode:i}=(0,l.tv)(),[o,m]=(0,a.useState)(!1),[g,v]=(0,a.useState)(0),[f,j]=(0,a.useState)(""),[Z,C]=(0,a.useState)([]),[b,y]=(0,a.useState)(""),[w,P]=(0,a.useState)(""),[S,k]=(0,a.useState)(""),[_,z]=(0,a.useState)(""),[R,D]=(0,a.useState)(null),[I,B]=(0,a.useState)(0),[H,L]=(0,a.useState)(0),[M,Y]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async function(){let e=await (0,Q.PR)("/knowledge/".concat(t,"/document/list"),{page:1,page_size:20});e.success&&(C(e.data.data),B(e.data.total),L(e.data.page))})()},[]),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsxs)(d.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{marginBottom:"20px"},children:[(0,n.jsxs)(c.Z,{"aria-label":"breadcrumbs",children:[(0,n.jsx)(h.Z,{onClick:()=>{e.push("/datastores")},underline:"hover",color:"neutral",fontSize:"inherit",children:"Knowledge Space"},"Knowledge Space"),(0,n.jsx)(x.ZP,{fontSize:"inherit",children:"Documents"})]}),(0,n.jsxs)(d.Z,{direction:"row",alignItems:"center",children:[(0,n.jsxs)(p.Z,{variant:"outlined",onClick:async()=>{var i,n;let r=await (0,Q.PR)("/api/v1/chat/dialogue/new",{chat_mode:"chat_knowledge"});(null==r?void 0:r.success)&&(null==r?void 0:null===(i=r.data)||void 0===i?void 0:i.conv_uid)&&e.push("/chat?id=".concat(null==r?void 0:null===(n=r.data)||void 0===n?void 0:n.conv_uid,"&scene=chat_knowledge&spaceNameOriginal=").concat(t))},sx:{marginRight:"20px",backgroundColor:"rgb(39, 155, 255) !important",color:"white",border:"none"},children:[(0,n.jsx)(J.Z,{sx:{marginRight:"6px",fontSize:"18px"}}),"Chat"]}),(0,n.jsx)(p.Z,{variant:"outlined",onClick:()=>m(!0),sx:{marginRight:"20px"},children:"+ Add Datasource"}),(0,n.jsx)(er,{spaceName:t})]})]}),Z.length?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.Z,{color:"primary",variant:"plain",size:"sm",sx:{"& tbody tr: hover":{backgroundColor:"light"===i?"rgb(246, 246, 246)":"rgb(33, 33, 40)"},"& tbody tr: hover a":{textDecoration:"underline"},"& tr > *:last-child":{textAlign:"right"}},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Name"}),(0,n.jsx)("th",{children:"Type"}),(0,n.jsx)("th",{children:"Size"}),(0,n.jsx)("th",{children:"Last Synch"}),(0,n.jsx)("th",{children:"Status"}),(0,n.jsx)("th",{children:"Result"}),(0,n.jsx)("th",{style:{width:"30%"},children:"Operation"})]})}),(0,n.jsx)("tbody",{children:Z.map(i=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:i.doc_name}),(0,n.jsx)("td",{children:(0,n.jsx)(T,{size:"sm",variant:"solid",color:"neutral",sx:{opacity:.5},children:i.doc_type})}),(0,n.jsxs)("td",{children:[i.chunk_size," chunks"]}),(0,n.jsx)("td",{children:W()(i.last_sync).format("YYYY-MM-DD HH:MM:SS")}),(0,n.jsx)("td",{children:(0,n.jsx)(T,{size:"sm",sx:{opacity:.5},variant:"solid",color:function(){switch(i.status){case"TODO":return"neutral";case"RUNNING":return"primary";case"FINISHED":return"success";case"FAILED":return"danger"}}(),children:i.status})}),(0,n.jsx)("td",{children:"TODO"===i.status||"RUNNING"===i.status?"":"FINISHED"===i.status?(0,n.jsx)(K.Z,{content:i.result,trigger:"hover",children:(0,n.jsx)(T,{size:"sm",variant:"solid",color:"success",sx:{opacity:.5},children:"SUCCESS"})}):(0,n.jsx)(K.Z,{content:i.result,trigger:"hover",children:(0,n.jsx)(T,{size:"sm",variant:"solid",color:"danger",sx:{opacity:.5},children:"FAILED"})})}),(0,n.jsx)("td",{children:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.Z,{variant:"outlined",size:"sm",sx:{marginRight:"2px"},onClick:async()=>{let e=await (0,Q.PR)("/knowledge/".concat(t,"/document/sync"),{doc_ids:[i.id]});e.success?X.ZP.success("success"):X.ZP.error(e.err_msg||"failed")},children:["Synch",(0,n.jsx)($.Z,{})]}),(0,n.jsx)(p.Z,{variant:"outlined",size:"sm",sx:{marginRight:"2px"},onClick:()=>{e.push("/datastores/documents/chunklist?spacename=".concat(t,"&documentid=").concat(i.id))},children:"Details"}),(0,n.jsxs)(p.Z,{variant:"outlined",size:"sm",color:"danger",onClick:async()=>{let e=await (0,Q.PR)("/knowledge/".concat(t,"/document/delete"),{doc_name:i.doc_name});if(e.success){X.ZP.success("success");let e=await (0,Q.PR)("/knowledge/".concat(t,"/document/list"),{page:H,page_size:20});e.success&&(C(e.data.data),B(e.data.total),L(e.data.page))}else X.ZP.error(e.err_msg||"failed")},children:["Delete",(0,n.jsx)(G.Z,{})]})]})})]},i.id))})]}),(0,n.jsx)(d.Z,{direction:"row",justifyContent:"flex-end",sx:{marginTop:"20px"},children:(0,n.jsx)(q.Z,{defaultPageSize:20,showSizeChanger:!1,current:H,total:I,onChange:async e=>{let i=await (0,Q.PR)("/knowledge/".concat(t,"/document/list"),{page:e,page_size:20});i.success&&(C(i.data.data),B(i.data.total),L(i.data.page))},hideOnSinglePage:!0})})]}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(N.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center","z-index":1e3},open:o,onClose:()=>m(!1),children:(0,n.jsxs)(s.Z,{variant:"outlined",sx:{width:800,borderRadius:"md",p:3,boxShadow:"lg"},children:[(0,n.jsx)(F.Z,{sx:{width:"100%"},children:(0,n.jsx)(d.Z,{spacing:2,direction:"row",children:es.map((e,t)=>(0,n.jsxs)(eo,{sx:{fontWeight:g===t?"bold":"",color:g===t?"#2AA3FF":""},children:[t<g?(0,n.jsx)(U.Z,{}):"".concat(t+1,"."),"".concat(e)]},e))})}),0===g?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(F.Z,{sx:{margin:"30px auto"},children:el.map(e=>(0,n.jsxs)(s.Z,{sx:{boxSizing:"border-box",height:"80px",padding:"12px",display:"flex",flexDirection:"column",justifyContent:"space-between",border:"1px solid gray",borderRadius:"6px",marginBottom:"20px",cursor:"pointer"},onClick:()=>{j(e.type),v(1)},children:[(0,n.jsx)(s.Z,{sx:{fontSize:"20px",fontWeight:"bold"},children:e.title}),(0,n.jsx)(s.Z,{children:e.subTitle})]},e.type))})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(F.Z,{sx:{margin:"30px auto"},children:["Name:",(0,n.jsx)(O.ZP,{placeholder:"Please input the name",onChange:e=>P(e.target.value),sx:{marginBottom:"20px"}}),"webPage"===f?(0,n.jsxs)(n.Fragment,{children:["Web Page URL:",(0,n.jsx)(O.ZP,{placeholder:"Please input the Web Page URL",onChange:e=>y(e.target.value)})]}):"file"===f?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(ea,{name:"file",multiple:!1,onChange(e){var t;if(console.log(e),0===e.fileList.length){D(null),P("");return}D(e.file.originFileObj),P(null===(t=e.file.originFileObj)||void 0===t?void 0:t.name)},children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(V.Z,{})}),(0,n.jsx)("p",{style:{color:"rgb(22, 108, 255)",fontSize:"20px"},children:"Select or Drop file"}),(0,n.jsx)("p",{className:"ant-upload-hint",style:{color:"rgb(22, 108, 255)"},children:"PDF, PowerPoint, Excel, Word, Text, Markdown,"})]})}):(0,n.jsxs)(n.Fragment,{children:["Text Source(Optional):",(0,n.jsx)(O.ZP,{placeholder:"Please input the text source",onChange:e=>k(e.target.value),sx:{marginBottom:"20px"}}),"Text:",(0,n.jsx)(A.Z,{onChange:e=>z(e.target.value),minRows:4,sx:{marginBottom:"20px"}})]}),(0,n.jsx)(x.ZP,{component:"label",sx:{marginTop:"20px"},endDecorator:(0,n.jsx)(E.Z,{checked:M,onChange:e=>Y(e.target.checked)}),children:"Synch:"})]}),(0,n.jsxs)(d.Z,{direction:"row",justifyContent:"flex-start",alignItems:"center",sx:{marginBottom:"20px"},children:[(0,n.jsx)(p.Z,{variant:"outlined",sx:{marginRight:"20px"},onClick:()=>v(0),children:"< Back"}),(0,n.jsx)(p.Z,{variant:"outlined",onClick:async()=>{if(""===w){X.ZP.error("Please input the name");return}if("webPage"===f){if(""===b){X.ZP.error("Please input the Web Page URL");return}let e=await (0,Q.PR)("/knowledge/".concat(t,"/document/add"),{doc_name:w,content:b,doc_type:"URL"});if(e.success&&M&&(0,Q.PR)("/knowledge/".concat(t,"/document/sync"),{doc_ids:[e.data]}),e.success){X.ZP.success("success"),m(!1);let e=await (0,Q.PR)("/knowledge/".concat(t,"/document/list"),{page:H,page_size:20});e.success&&(C(e.data.data),B(e.data.total),L(e.data.page))}else X.ZP.error(e.err_msg||"failed")}else if("file"===f){if(!R){X.ZP.error("Please select a file");return}let e=new FormData;e.append("doc_name",w),e.append("doc_file",R),e.append("doc_type","DOCUMENT");let i=await (0,Q.Ej)("/knowledge/".concat(t,"/document/upload"),e);if(i.success&&M&&(0,Q.PR)("/knowledge/".concat(t,"/document/sync"),{doc_ids:[i.data]}),i.success){X.ZP.success("success"),m(!1);let e=await (0,Q.PR)("/knowledge/".concat(t,"/document/list"),{page:H,page_size:20});e.success&&(C(e.data.data),B(e.data.total),L(e.data.page))}else X.ZP.error(i.err_msg||"failed")}else{if(""===_){X.ZP.error("Please input the text");return}let e=await (0,Q.PR)("/knowledge/".concat(t,"/document/add"),{doc_name:w,source:S,content:_,doc_type:"TEXT"});if(e.success&&M&&(0,Q.PR)("/knowledge/".concat(t,"/document/sync"),{doc_ids:[e.data]}),e.success){X.ZP.success("success"),m(!1);let e=await (0,Q.PR)("/knowledge/".concat(t,"/document/list"),{page:H,page_size:20});e.success&&(C(e.data.data),B(e.data.total),L(e.data.page))}else X.ZP.error(e.err_msg||"failed")}},children:"Finish"})]})]})]})})]})}},78915:function(e,t,i){"use strict";i.d(t,{Tk:function(){return c},Kw:function(){return h},PR:function(){return x},Ej:function(){return p}});var n=i(21628),r=i(24214),a=i(52040);let o=r.Z.create({baseURL:a.env.API_BASE_URL});o.defaults.timeout=1e4,o.interceptors.response.use(e=>e.data,e=>Promise.reject(e));var s=i(84835);let l={"content-type":"application/json"},d=e=>{if(!(0,s.isPlainObject)(e))return JSON.stringify(e);let t={...e};for(let e in t){let i=t[e];"string"==typeof i&&(t[e]=i.trim())}return JSON.stringify(t)},c=(e,t)=>{if(t){let i=Object.keys(t).filter(e=>void 0!==t[e]&&""!==t[e]).map(e=>"".concat(e,"=").concat(t[e])).join("&");i&&(e+="?".concat(i))}return o.get("/api"+e,{headers:l}).then(e=>e).catch(e=>{n.ZP.error(e),Promise.reject(e)})},h=(e,t)=>{let i=d(t);return o.post("/api"+e,{body:i,headers:l}).then(e=>e).catch(e=>{n.ZP.error(e),Promise.reject(e)})},x=(e,t)=>(d(t),o.post(e,t,{headers:l}).then(e=>e).catch(e=>{n.ZP.error(e),Promise.reject(e)})),p=(e,t)=>o.post(e,t).then(e=>e).catch(e=>{n.ZP.error(e),Promise.reject(e)})}},function(e){e.O(0,[180,550,877,230,759,192,81,86,409,790,946,767,957,872,253,769,744],function(){return e(e.s=42414)}),_N_E=e.O()}]);