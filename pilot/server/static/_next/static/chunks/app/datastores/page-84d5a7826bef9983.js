(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[43],{25123:function(e,t,o){"use strict";var n=o(78997);t.Z=void 0;var a=n(o(76906)),i=o(9268),s=(0,a.default)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14zm-8-2h2v-4h4v-2h-4V7h-2v4H7v2h4z"}),"AddBoxOutlined");t.Z=s},29382:function(e,t,o){"use strict";var n=o(78997);t.Z=void 0;var a=n(o(76906)),i=o(9268),s=(0,a.default)([(0,i.jsx)("path",{d:"M5 5h2v3h10V5h2v5h2V5c0-1.1-.9-2-2-2h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h5v-2H5V5zm7-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"},"0"),(0,i.jsx)("path",{d:"M20.3 18.9c.4-.7.7-1.5.7-2.4 0-2.5-2-4.5-4.5-4.5S12 14 12 16.5s2 4.5 4.5 4.5c.9 0 1.7-.3 2.4-.7l2.7 2.7 1.4-1.4-2.7-2.7zm-3.8.1c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"},"1")],"ContentPasteSearchOutlined");t.Z=s},31982:function(e,t,o){Promise.resolve().then(o.bind(o,44323))},44323:function(e,t,o){"use strict";o.r(t);var n=o(9268),a=o(56008),i=o(86006),s=o(72474),r=o(59534),c=o(25123),l=o(29382),d=o(50157),x=o(21628),p=o(50645),h=o(5737),g=o(78635),u=o(90545),m=o(70900),w=o(11437),f=o(35086),j=o(53113),b=o(866),y=o(22046),Z=o(28086);let{Dragger:S}=d.default,P=(0,p.Z)(h.Z)(e=>{let{theme:t}=e;return{width:"33%",backgroundColor:"dark"===t.palette.mode?t.palette.background.level1:"#fff",...t.typography.body2,padding:t.spacing(1),textAlign:"center",borderRadius:4,color:t.vars.palette.text.secondary}}),k=["Knowledge Space Config","Choose a Datasource type","Setup the Datasource"],C=[{type:"text",title:"Text",subTitle:"Fill your raw text"},{type:"webPage",title:"URL",subTitle:"Fetch the content of a URL"},{type:"file",title:"Document",subTitle:"Upload a document, document type can be PDF, CSV, Text, PowerPoint, Word, Markdown"}];t.default=()=>{let e=(0,a.useRouter)(),{mode:t}=(0,g.tv)(),[o,d]=(0,i.useState)(0),[p,v]=(0,i.useState)(""),[T,O]=(0,i.useState)([]),[_,z]=(0,i.useState)(!1),[N,$]=(0,i.useState)(""),[R,F]=(0,i.useState)(""),[D,B]=(0,i.useState)(""),[W,E]=(0,i.useState)(""),[J,U]=(0,i.useState)(""),[V,L]=(0,i.useState)(null),[M,G]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async function(){let e=await fetch("".concat("http://${window.location.hostname}:${window.location.port}","/knowledge/space/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),t=await e.json();t.success&&O(t.data)})()},[]),(0,n.jsxs)(u.Z,{sx:{width:"100%",height:"100%",backgroundColor:"light"===t?"rgb(238, 240, 245)":"rgb(33, 33, 33)"},children:[(0,n.jsx)(u.Z,{className:"page-body p-4",sx:{"&":{height:"90%",overflow:"auto"},"&::-webkit-scrollbar":{display:"none"}},children:(0,n.jsxs)(m.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",sx:{"& i":{width:"430px",marginRight:"30px"}},children:[(0,n.jsxs)(u.Z,{sx:{boxSizing:"content-box",width:"390px",height:"79px",padding:"33px 20px 40px",marginRight:"30px",marginBottom:"30px",fontSize:"18px",fontWeight:"bold",color:"black",backgroundColor:"light"===t?"rgb(224, 228, 237)":"rgb(72, 72, 72)",flexShrink:0,flexGrow:0,cursor:"pointer","&: hover":{boxShadow:"0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);"}},onClick:()=>z(!0),children:[(0,n.jsx)(c.Z,{sx:{marginRight:"10px",fontSize:"30px"}}),"Space"]}),T.map((o,a)=>(0,n.jsxs)(u.Z,{sx:{padding:"30px 20px 40px",marginRight:"30px",marginBottom:"30px",backgroundColor:"light"===t?"rgb(255, 255, 255)":"rgb(72, 72, 72)",borderTop:"3px solid rgb(82, 196, 26)",flexShrink:0,flexGrow:0,cursor:"pointer","&: hover":{boxShadow:"0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1);"}},onClick:()=>{e.push("/datastores/documents?name=".concat(o.name))},children:[(0,n.jsxs)(u.Z,{sx:{fontSize:"18px",marginBottom:"10px",fontWeight:"bold",color:"black"},children:[(0,n.jsx)(l.Z,{sx:{marginRight:"5px"}}),o.name]}),(0,n.jsxs)(u.Z,{sx:{display:"flex",justifyContent:"flex-start"},children:[(0,n.jsxs)(u.Z,{sx:{width:"130px",flexGrow:0,flexShrink:0},children:[(0,n.jsx)(u.Z,{sx:{color:"black"},children:o.vector_type}),(0,n.jsx)(u.Z,{sx:{fontSize:"12px",color:"black"},children:"Vector"})]}),(0,n.jsxs)(u.Z,{sx:{width:"130px",flexGrow:0,flexShrink:0},children:[(0,n.jsx)(u.Z,{sx:{color:"black"},children:o.owner}),(0,n.jsx)(u.Z,{sx:{fontSize:"12px",color:"black"},children:"Owner"})]}),(0,n.jsxs)(u.Z,{sx:{width:"130px",flexGrow:0,flexShrink:0},children:[(0,n.jsx)(u.Z,{sx:{color:"black"},children:o.docs||0}),(0,n.jsx)(u.Z,{sx:{fontSize:"12px",color:"black"},children:"Docs"})]})]})]},a)),(0,n.jsx)("i",{}),(0,n.jsx)("i",{}),(0,n.jsx)("i",{}),(0,n.jsx)("i",{}),(0,n.jsx)("i",{})]})}),(0,n.jsx)(w.Z,{sx:{display:"flex",justifyContent:"center",alignItems:"center","z-index":1e3},open:_,onClose:()=>z(!1),children:(0,n.jsxs)(h.Z,{variant:"outlined",sx:{width:800,borderRadius:"md",p:3,boxShadow:"lg"},children:[(0,n.jsx)(u.Z,{sx:{width:"100%"},children:(0,n.jsx)(m.Z,{spacing:2,direction:"row",children:k.map((e,t)=>(0,n.jsxs)(P,{sx:{fontWeight:o===t?"bold":"",color:o===t?"#814DDE":""},children:[t<o?(0,n.jsx)(r.Z,{}):"".concat(t+1,"."),"".concat(e)]},e))})}),0===o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.Z,{sx:{margin:"30px auto"},children:["Knowledge Space Name:",(0,n.jsx)(f.ZP,{placeholder:"Please input the name",onChange:e=>$(e.target.value)})]}),(0,n.jsx)(j.Z,{variant:"outlined",onClick:async()=>{if(""===N){x.ZP.error("please input the name");return}let e=await fetch("".concat("http://${window.location.hostname}:${window.location.port}","/knowledge/space/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:N,vector_type:"Chroma",owner:"keting",desc:"test1"})}),t=await e.json();if(t.success){x.ZP.success("success"),d(1);let e=await fetch("".concat("http://${window.location.hostname}:${window.location.port}","/knowledge/space/list"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({})}),t=await e.json();t.success&&O(t.data)}else x.ZP.error(t.err_msg||"failed")},children:"Next"})]}):1===o?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.Z,{sx:{margin:"30px auto"},children:C.map(e=>(0,n.jsxs)(h.Z,{sx:{boxSizing:"border-box",height:"80px",padding:"12px",display:"flex",flexDirection:"column",justifyContent:"space-between",border:"1px solid gray",borderRadius:"6px",marginBottom:"20px",cursor:"pointer"},onClick:()=>{v(e.type),d(2)},children:[(0,n.jsx)(h.Z,{sx:{fontSize:"20px",fontWeight:"bold"},children:e.title}),(0,n.jsx)(h.Z,{children:e.subTitle})]},e.type))})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.Z,{sx:{margin:"30px auto"},children:["Name:",(0,n.jsx)(f.ZP,{placeholder:"Please input the name",onChange:e=>B(e.target.value),sx:{marginBottom:"20px"}}),"webPage"===p?(0,n.jsxs)(n.Fragment,{children:["Web Page URL:",(0,n.jsx)(f.ZP,{placeholder:"Please input the Web Page URL",onChange:e=>F(e.target.value)})]}):"file"===p?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(S,{name:"file",multiple:!1,onChange(e){var t;if(console.log(e),0===e.fileList.length){L(null),B("");return}L(e.file.originFileObj),B(null===(t=e.file.originFileObj)||void 0===t?void 0:t.name)},children:[(0,n.jsx)("p",{className:"ant-upload-drag-icon",children:(0,n.jsx)(s.Z,{})}),(0,n.jsx)("p",{style:{color:"rgb(22, 108, 255)",fontSize:"20px"},children:"Select or Drop file"}),(0,n.jsx)("p",{className:"ant-upload-hint",style:{color:"rgb(22, 108, 255)"},children:"PDF, PowerPoint, Excel, Word, Text, Markdown,"})]})}):(0,n.jsxs)(n.Fragment,{children:["Text Source(Optional):",(0,n.jsx)(f.ZP,{placeholder:"Please input the text source",onChange:e=>E(e.target.value),sx:{marginBottom:"20px"}}),"Text:",(0,n.jsx)(b.Z,{onChange:e=>U(e.target.value),minRows:4,sx:{marginBottom:"20px"}})]}),(0,n.jsx)(y.ZP,{component:"label",sx:{marginTop:"20px"},endDecorator:(0,n.jsx)(Z.Z,{checked:M,onChange:e=>G(e.target.checked)}),children:"Synch:"})]}),(0,n.jsxs)(m.Z,{direction:"row",justifyContent:"flex-start",alignItems:"center",sx:{marginBottom:"20px"},children:[(0,n.jsx)(j.Z,{variant:"outlined",sx:{marginRight:"20px"},onClick:()=>d(1),children:"< Back"}),(0,n.jsx)(j.Z,{variant:"outlined",onClick:async()=>{if(""===D){x.ZP.error("Please input the name");return}if("webPage"===p){if(""===R){x.ZP.error("Please input the Web Page URL");return}let e=await fetch("".concat("http://${window.location.hostname}:${window.location.port}","/knowledge/").concat(N,"/document/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc_name:D,content:R,doc_type:"URL"})}),t=await e.json();t.success?(x.ZP.success("success"),z(!1),M&&fetch("".concat("http://${window.location.hostname}:${window.location.port}","/knowledge/").concat(N,"/document/sync"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc_ids:[t.data]})})):x.ZP.error(t.err_msg||"failed")}else if("file"===p){if(!V){x.ZP.error("Please select a file");return}let e=new FormData;e.append("doc_name",D),e.append("doc_file",V),e.append("doc_type","DOCUMENT");let t=await fetch("".concat("http://${window.location.hostname}:${window.location.port}","/knowledge/").concat(N,"/document/upload"),{method:"POST",body:e}),o=await t.json();o.success?(x.ZP.success("success"),z(!1),M&&fetch("".concat("http://${window.location.hostname}:${window.location.port}","/knowledge/").concat(N,"/document/sync"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc_ids:[o.data]})})):x.ZP.error(o.err_msg||"failed")}else{if(""===J){x.ZP.error("Please input the text");return}let e=await fetch("".concat("http://${window.location.hostname}:${window.location.port}","/knowledge/").concat(N,"/document/add"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc_name:D,source:W,content:J,doc_type:"TEXT"})}),t=await e.json();t.success?(x.ZP.success("success"),z(!1),M&&fetch("".concat("http://${window.location.hostname}:${window.location.port}","/knowledge/").concat(N,"/document/sync"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({doc_ids:[t.data]})})):x.ZP.error(t.err_msg||"failed")}},children:"Finish"})]})]})]})})]})}}},function(e){e.O(0,[430,577,86,693,118,672,642,253,769,744],function(){return e(e.s=31982)}),_N_E=e.O()}]);