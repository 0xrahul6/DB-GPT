(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{72431:function(){},91541:function(e,n,t){Promise.resolve().then(t.bind(t,50902))},57931:function(e,n,t){"use strict";t.d(n,{ZP:function(){return c},Cg:function(){return a}});var r=t(9268),i=t(89081),s=t(89749),l=t(86006);let[a,o]=function(){let e=l.createContext(void 0);return[function(){let n=l.useContext(e);if(void 0===n)throw Error("useCtx must be inside a Provider with a value");return n},e.Provider]}();var c=e=>{let{children:n}=e,{run:t,data:l,refresh:a}=(0,i.Z)(async()=>await (0,s.T)("/v1/chat/dialogue/list"),{manual:!0});return(0,r.jsx)(o,{value:{dialogueList:l,queryDialogueList:t,refreshDialogList:a},children:n})}},50902:function(e,n,t){"use strict";let r,i;t.r(n),t.d(n,{default:function(){return A}});var s=t(9268);t(97402),t(23517);var l=t(86006),a=t(56008),o=t(35846),c=t.n(o),d=t(50162),u=t(78635),h=t(90545),x=t(22046),f=t(99987),p=t(18818),m=t(4882),j=t(70092),v=t(64579),g=t(53047),y=t(62921),Z=t(40020),b=t(11515),w=t(84892),C=t(601),k=t(1301),N=t(57931),P=t(66664),_=t(89749),B=()=>{var e;let n=(0,a.usePathname)(),t=(0,a.useRouter)(),{dialogueList:r,queryDialogueList:i,refreshDialogList:o}=(0,N.Cg)(),{mode:B,setMode:D}=(0,u.tv)(),E=(0,l.useMemo)(()=>[{label:"Knowledge Space",route:"/datastores",icon:(0,s.jsx)(Z.Z,{fontSize:"small"}),active:"/datastores"===n}],[n]);return(0,l.useEffect)(()=>{(async()=>{await i()})()},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("nav",{className:"flex h-12 items-center justify-between border-b bg-gray-50 px-4 dark:border-gray-800 dark:bg-gray-800/70 md:hidden",children:[(0,s.jsx)("div",{children:(0,s.jsx)(C.Z,{})}),(0,s.jsx)("span",{className:"truncate px-4",children:"New Chat"}),(0,s.jsx)("a",{href:"",className:"-mr-3 flex h-9 w-9 shrink-0 items-center justify-center",children:(0,s.jsx)(k.Z,{})})]}),(0,s.jsx)("nav",{className:"grid max-h-screen h-full max-md:hidden",children:(0,s.jsxs)(h.Z,{sx:{display:"flex",flexDirection:"column",borderRight:"1px solid",borderColor:"divider",maxHeight:"100vh",position:"sticky",left:"0px",top:"0px",overflow:"hidden"},children:[(0,s.jsx)(h.Z,{sx:{p:2,gap:2,display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:(0,s.jsx)("div",{className:"flex items-center  gap-3",children:(0,s.jsx)(x.ZP,{component:"h1",fontWeight:"xl",children:"DB-GPT"})})}),(0,s.jsx)(h.Z,{sx:{px:2},children:(0,s.jsx)(c(),{href:"/",children:(0,s.jsx)(f.Z,{variant:"outlined",color:"primary",className:"w-full",children:"+ New Chat"})})}),(0,s.jsx)(h.Z,{sx:{p:2,display:{xs:"none",sm:"initial"},maxHeight:"100%",overflow:"auto"},children:(0,s.jsx)(p.Z,{size:"sm",sx:{"--ListItem-radius":"8px"},children:(0,s.jsx)(m.Z,{nested:!0,children:(0,s.jsx)(p.Z,{size:"sm","aria-labelledby":"nav-list-browse",sx:{"& .JoyListItemButton-root":{p:"8px"}},children:null==r?void 0:null===(e=r.data)||void 0===e?void 0:e.map(e=>{let r=n==="/agents/".concat(e.conv_uid);return(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(j.Z,{selected:r,variant:r?"soft":"plain",children:(0,s.jsx)(v.Z,{children:(0,s.jsx)(c(),{href:"/agents/".concat(e.conv_uid,"?scene=").concat(null==e?void 0:e.chat_mode),children:(0,s.jsx)(x.ZP,{fontSize:14,noWrap:!0,children:(null==e?void 0:e.user_name)||(null==e?void 0:e.user_input)||"undefined"})})})}),(0,s.jsx)(d.Z,{title:"删除对话",description:"确认要删除该对话吗",onConfirm:async()=>{await (0,_.K)("v1/chat/dialogue/delete?con_uid=".concat(e.conv_uid)),await o(),n==="/agents/".concat(e.conv_uid)&&t.push("/")},okText:"Yes",cancelText:"No",children:(0,s.jsx)(g.ZP,{color:"neutral",variant:"plain",children:(0,s.jsx)(P.Z,{})})})]},e.conv_uid)})})})})}),(0,s.jsxs)("div",{className:"flex flex-col justify-between flex-1",children:[(0,s.jsx)("div",{}),(0,s.jsx)(h.Z,{sx:{p:2,borderTop:"1px solid",borderColor:"divider",display:{xs:"none",sm:"initial"},position:"sticky",bottom:0,zIndex:100,background:"var(--joy-palette-background-body)"},children:(0,s.jsxs)(p.Z,{size:"sm",sx:{"--ListItem-radius":"8px"},children:[(0,s.jsx)(m.Z,{nested:!0,children:(0,s.jsx)(p.Z,{size:"sm","aria-labelledby":"nav-list-browse",sx:{"& .JoyListItemButton-root":{p:"8px"}},children:E.map(e=>(0,s.jsx)(c(),{href:e.route,children:(0,s.jsx)(m.Z,{children:(0,s.jsxs)(j.Z,{color:"neutral",selected:e.active,variant:e.active?"soft":"plain",children:[(0,s.jsx)(y.Z,{sx:{color:e.active?"inherit":"neutral.500"},children:e.icon}),(0,s.jsx)(v.Z,{children:e.label})]})})},e.route))})}),(0,s.jsx)(m.Z,{children:(0,s.jsxs)(j.Z,{onClick:()=>{"light"===B?D("dark"):D("light")},children:[(0,s.jsx)(y.Z,{children:"dark"===B?(0,s.jsx)(b.Z,{fontSize:"small"}):(0,s.jsx)(w.Z,{fontSize:"small"})}),(0,s.jsx)(v.Z,{children:"Theme"})]})})]})})]})]})})]})},D=t(29720),E=t(41287),S=t(38230);let F=(0,E.Z)({colorSchemes:{light:{palette:{mode:"dark",primary:{...S.Z.purple},neutral:{plainColor:"#4d4d4d",plainHoverColor:"#131318",plainHoverBg:"#EBEBEF",plainActiveBg:"#D8D8DF",plainDisabledColor:"#B9B9C6"},background:{body:"#fff",surface:"#fff"},text:{primary:"#25252D"}}},dark:{palette:{mode:"light",primary:{...S.Z.purple},neutral:{plainColor:"#D8D8DF",plainHoverColor:"#F7F7F8",plainHoverBg:"#25252D",plainActiveBg:"#434356",plainDisabledColor:"#434356"},text:{primary:"#EBEBEF"},background:{body:"#0f172a",surface:"#1e293b40"}}}},fontFamily:{body:"Josefin Sans, sans-serif",display:"Josefin Sans, sans-serif"},typography:{display1:{background:"linear-gradient(-30deg, var(--joy-palette-primary-900), var(--joy-palette-primary-400))",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});var T=t(53794),z=t.n(T),H=t(54486),I=t.n(H);let J=0;function L(){"loading"!==i&&(i="loading",r=setTimeout(function(){I().start()},250))}function O(){J>0||(i="stop",clearTimeout(r),I().done())}if(z().events.on("routeChangeStart",L),z().events.on("routeChangeComplete",O),z().events.on("routeChangeError",O),"function"==typeof(null==window?void 0:window.fetch)){let e=window.fetch;window.fetch=async function(){for(var n=arguments.length,t=Array(n),r=0;r<n;r++)t[r]=arguments[r];0===J&&L(),J++;try{let n=await e(...t);return n}catch(e){return Promise.reject(e)}finally{0==(J-=1)&&O()}}}function W(){return null}var A=function(e){let{children:n}=e;return(0,s.jsx)("html",{lang:"en",className:"h-full font-sans",children:(0,s.jsx)("body",{className:"h-full font-sans",children:(0,s.jsx)(D.Z,{theme:F,children:(0,s.jsxs)(u.lL,{theme:F,defaultMode:"light",children:[(0,s.jsx)(W,{}),(0,s.jsx)(N.ZP,{children:(0,s.jsx)("div",{className:"contents h-full",children:(0,s.jsxs)("div",{className:"grid h-full w-screen grid-cols-1 grid-rows-[auto,1fr] overflow-hidden text-smd dark:text-gray-300 md:grid-cols-[280px,1fr] md:grid-rows-[1fr]",children:[(0,s.jsx)(B,{}),(0,s.jsx)("div",{className:"relative min-h-0 min-w-0",children:n})]})})})]})})})})}},89749:function(e,n,t){"use strict";t.d(n,{K:function(){return c},T:function(){return o}});var r=t(3748),i=t(24214),s=t(84835);i.Z.defaults.baseURL="http://127.0.0.1:5000",i.Z.defaults.timeout=1e4,i.Z.interceptors.response.use(e=>e.data,e=>Promise.reject(e));let l={"content-type":"application/json"},a=e=>{if(!(0,s.isPlainObject)(e))return JSON.stringify(e);let n={...e};for(let e in n){let t=n[e];"string"==typeof t&&(n[e]=t.trim())}return JSON.stringify(n)},o=(e,n)=>{if(n){let t=Object.keys(n).filter(e=>void 0!==n[e]&&""!==n[e]).map(e=>"".concat(e,"=").concat(n[e])).join("&");t&&(e+="?".concat(t))}return i.Z.get(e,{headers:l}).then(e=>e).catch(e=>{r.ZP.error(e),Promise.reject(e)})},c=(e,n)=>{let t=a(n);return i.Z.post(e,{body:t,headers:l}).then(e=>e).catch(e=>{r.ZP.error(e),Promise.reject(e)})}},97402:function(){},23517:function(){}},function(e){e.O(0,[180,448,22,599,93,952,261,751,66,253,769,744],function(){return e(e.s=91541)}),_N_E=e.O()}]);